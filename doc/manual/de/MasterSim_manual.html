<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Andreas Nicolai">
<title>MasterSim User Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1>MasterSim User Guide</h1>
<div class="details">
<span id="author" class="author">Andreas Nicolai</span><br>
<span id="email" class="email"><a href="mailto:andreas.nicolai@tu-dresden.de">andreas.nicolai@tu-dresden.de</a></span><br>
<span id="revnumber">version 0.8.2,</span>
<span id="revdate">Nov 2019</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_einführung_und_grundbegriffe">1. Einführung und Grundbegriffe</a>
<ul class="sectlevel2">
<li><a href="#_die_teile_des_programms">1.1. Die Teile des Programms</a></li>
<li><a href="#_unterstützte_fmu_varianten">1.2. Unterstützte FMU - Varianten</a></li>
<li><a href="#_konstruktionskriterien_schwerpunkte">1.3. Konstruktionskriterien/ Schwerpunkte</a>
<ul class="sectlevel3">
<li><a href="#_besondere_funktionen_von_mastersim">1.3.1. Besondere Funktionen von <em>MasterSim</em></a></li>
</ul>
</li>
<li><a href="#_terminologie">1.4. Terminologie</a></li>
<li><a href="#_arbeitsablauf">1.5. Arbeitsablauf</a>
<ul class="sectlevel3">
<li><a href="#_ersteinrichtung_eines_simulationsszenarios">1.5.1. Ersteinrichtung eines Simulationsszenarios</a></li>
<li><a href="#_nur_publizierte_fmu_parameter_sind_modifiziert">1.5.2. Nur publizierte FMU-Parameter sind modifiziert</a></li>
<li><a href="#_fmus_ändern_das_interne_verhalten_aber_nicht_die_oberfläche">1.5.3. FMUs ändern das interne Verhalten, aber nicht die Oberfläche</a></li>
<li><a href="#_fmus_ändern_parameter_aber_nicht_die_ein_und_ausgangsgrößen">1.5.4. FMUs ändern Parameter aber nicht die Ein- und Ausgangsgrößen</a></li>
<li><a href="#_fmus_ändern_die_oberfläche">1.5.5. FMUs ändern die Oberfläche</a></li>
</ul>
</li>
<li><a href="#_ein_überblick_über_den_simulations_algorithmus">1.6. Ein Überblick über den Simulations-Algorithmus</a></li>
<li><a href="#_initialisierung">1.7. Initialisierung</a>
<ul class="sectlevel3">
<li><a href="#_ausgangsbedingungen">1.7.1. Ausgangsbedingungen</a></li>
<li><a href="#_start_und_endzeit_der_simulation">1.7.2. Start- und Endzeit der Simulation</a></li>
</ul>
</li>
<li><a href="#_die_umstellung_der_zeitschritte">1.8. Die Umstellung der Zeitschritte</a>
<ul class="sectlevel3">
<li><a href="#_zeitschritt_verringerung_wenn_der_algorithmus_nicht_konvergiert">1.8.1. Zeitschritt-Verringerung, wenn der Algorithmus nicht konvergiert</a></li>
<li><a href="#_fehlerkontrolle_und_zeitschritt_regulierung">1.8.2. Fehlerkontrolle und Zeitschritt-Regulierung</a></li>
</ul>
</li>
<li><a href="#_master_algorithmen">1.9. Master-Algorithmen</a>
<ul class="sectlevel3">
<li><a href="#_gauss_jacobi">1.9.1. Gauss-Jacobi</a></li>
<li><a href="#_gauss_seidel">1.9.2. Gauss-Seidel</a></li>
<li><a href="#_newton">1.9.3. Newton</a></li>
</ul>
</li>
<li><a href="#_ausgänge_schreiben">1.10. Ausgänge schreiben</a></li>
</ul>
</li>
<li><a href="#_grafische_benutzeroberfläche">2. Grafische Benutzeroberfläche</a>
<ul class="sectlevel2">
<li><a href="#_startseite">2.1. Startseite</a>
<ul class="sectlevel3">
<li><a href="#_beispiele">2.1.1. Beispiele</a></li>
</ul>
</li>
<li><a href="#_symbolleiste_und_nützliche_tastenkombinationen">2.2. Symbolleiste und nützliche Tastenkombinationen</a>
<ul class="sectlevel3">
<li><a href="#_nützliche_kürzel">2.2.1. Nützliche Kürzel</a></li>
</ul>
</li>
<li><a href="#_die_definierte_ansicht_von_slaves">2.3. Die definierte Ansicht von Slaves</a>
<ul class="sectlevel3">
<li><a href="#_slaves_hinzufügen">2.3.1. Slaves hinzufügen</a></li>
<li><a href="#_eigenschaftenparameterwerte_der_slaves">2.3.2. Eigenschaften/Parameterwerte der Slaves</a></li>
<li><a href="#_netzwerkansicht">2.3.3. Netzwerkansicht</a></li>
<li><a href="#_block_editor">2.3.4. Block-Editor</a></li>
</ul>
</li>
<li><a href="#_ansichten_verknüpfen">2.4. Ansichten verknüpfen</a>
<ul class="sectlevel3">
<li><a href="#_die_besonderheiten_automatischer_verbindungen">2.4.1. Die Besonderheiten automatischer Verbindungen</a></li>
<li><a href="#_eine_verbindung_mit_einer_umwandlungstätigkeit_beauftragen">2.4.2. Eine Verbindung mit einer Umwandlungstätigkeit beauftragen</a></li>
</ul>
</li>
<li><a href="#_die_ansicht_der_simulationseinstellungen">2.5. Die Ansicht der Simulationseinstellungen</a></li>
<li><a href="#_einstellungs_dialog">2.6. Einstellungs-Dialog</a></li>
</ul>
</li>
<li><a href="#_mastersimulator_das_befehlszeilen_programm">3. <em>MasterSimulator</em> - Das Befehlszeilen-Programm</a>
<ul class="sectlevel2">
<li><a href="#_befehlszeilenargumente">3.1. Befehlszeilenargumente</a>
<ul class="sectlevel3">
<li><a href="#_arbeits_und_ausgangsverzeichnis">3.1.1. Arbeits- und Ausgangsverzeichnis</a></li>
<li><a href="#_wortarten_der_konsole_und_des_protokolldatei_ausgangs">3.1.2. Wortarten der Konsole und des Protokolldatei-Ausgangs</a></li>
<li><a href="#_spezielle_optionen_bei_windows">3.1.3. Spezielle Optionen bei Windows</a></li>
</ul>
</li>
<li><a href="#_struktur_und_inhalt_des_arbeitsverzeichnis">3.2. Struktur und Inhalt des Arbeitsverzeichnis</a>
<ul class="sectlevel3">
<li><a href="#_verzeichnis_log">3.2.1. Verzeichnis <code>log</code></a></li>
<li><a href="#_verzeichnis_fmus">3.2.2. Verzeichnis <code>fmus</code></a></li>
<li><a href="#_verzeichnis_slaves">3.2.3. Verzeichnis <code>Slaves</code></a></li>
</ul>
</li>
<li><a href="#_rückkehr_codes_des_mastersimulator_programms">3.3. Rückkehr-Codes des <em>MasterSimulator</em> -Programms</a></li>
<li><a href="#_simulationsausgabe">3.4. Simulationsausgabe</a>
<ul class="sectlevel3">
<li><a href="#_slave_ausgabewerte">3.4.1. Slave-Ausgabewerte</a></li>
<li><a href="#_finale_statistikzusammenfassung">3.4.2. Finale Statistik/Zusammenfassung</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_das_format_der_projekt_datei">4. Das Format der Projekt-Datei</a>
<ul class="sectlevel2">
<li><a href="#_einstellungen_des_simulators">4.1. Einstellungen des Simulators</a>
<ul class="sectlevel3">
<li><a href="#_fortgeschrittene_konfigurationen">4.1.1. Fortgeschrittene Konfigurationen</a></li>
</ul>
</li>
<li><a href="#_simulator_slave_definitionen">4.2. Simulator-/Slave-Definitionen</a>
<ul class="sectlevel3">
<li><a href="#_csv_filereader_slaves">4.2.1. CSV-FileReader-Slaves</a></li>
<li><a href="#_zeitpunkte_und_zeiteinheiten">4.2.2. Zeitpunkte und Zeiteinheiten</a></li>
<li><a href="#_interpretation_der_von_den_filereader_slaves_bereitgestellten_daten">4.2.3. Interpretation der von den FileReader-Slaves bereitgestellten Daten</a></li>
</ul>
</li>
<li><a href="#_verbindungsgrafik">4.3. Verbindungsgrafik</a>
<ul class="sectlevel3">
<li><a href="#_fmu_parameter">4.3.1. FMU-Parameter</a></li>
</ul>
</li>
<li><a href="#_blockmodell_das_dateiformat_der_netzwerkpräsentation">4.4. Blockmodell - das Dateiformat der Netzwerkpräsentation</a></li>
</ul>
</li>
<li><a href="#_konzept_zur_testfolge">5. Konzept zur Testfolge</a>
<ul class="sectlevel2">
<li><a href="#_regressionstest">5.1. Regressionstest</a>
<ul class="sectlevel3">
<li><a href="#_verzeichnisstruktur">5.1.1. Verzeichnisstruktur</a></li>
<li><a href="#_durchlauf_der_tests">5.1.2. Durchlauf der Tests</a></li>
<li><a href="#_aktualisierung_der_referenzergebnisse">5.1.3. Aktualisierung der Referenzergebnisse</a></li>
</ul>
</li>
<li><a href="#_regeln_für_gegenproben_und_die_liste_der_fmi_standard_org">5.2. Regeln für Gegenproben und die Liste der FMI Standard.org</a></li>
<li><a href="#_der_weg_um_test_fmus_zu_generieren">5.3. Der Weg um Test-FMUs zu generieren</a>
<ul class="sectlevel3">
<li><a href="#_der_gebrauch_von_c_fmus">5.3.1. Der Gebrauch von C++ - FMUs</a></li>
<li><a href="#_fmus_die_von_der_simulationsx_exportiert_werden">5.3.2. FMUs, die von der SimulationsX exportiert werden.</a></li>
<li><a href="#_von_openmodelica_exportierte_fmus">5.3.3. Von OpenModelica exportierte FMUs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_assistenzfunktionen_für_fmu_entwicklung_und_fehlerbeseitigung">6. Assistenzfunktionen für FMU-Entwicklung und Fehlerbeseitigung</a>
<ul class="sectlevel2">
<li><a href="#_modifikationfixierung_des_fmu_inhalts">6.1. Modifikation/Fixierung des FMU-Inhalts</a></li>
</ul>
</li>
<li><a href="#_informationen_für_entwickler">7. Informationen für Entwickler</a>
<ul class="sectlevel2">
<li><a href="#_erstellen_von_bibliotheken_und_ausführbaren_programmen">7.1. Erstellen von Bibliotheken und ausführbaren Programmen</a>
<ul class="sectlevel3">
<li><a href="#_erstellen_durch_die_befehlszeile">7.1.1. Erstellen durch die Befehlszeile</a></li>
<li><a href="#_externe_bibliotheken">7.1.2. Externe Bibliotheken</a></li>
</ul>
</li>
<li><a href="#_entwicklungsumgebungen_und_projekt_sitzungsdateien">7.2. Entwicklungsumgebungen und Projekt-/Sitzungsdateien</a>
<ul class="sectlevel3">
<li><a href="#_qt_creator">7.2.1. Qt Creator</a></li>
<li><a href="#_visuelles_studio">7.2.2. Visuelles Studio</a></li>
</ul>
</li>
<li><a href="#_hilfreiches_material_bezogen_auf_die_entwicklung_auf_linux">7.3. Hilfreiches Material bezogen auf die Entwicklung auf Linux</a>
<ul class="sectlevel3">
<li><a href="#_überprüfen_von_symbolen_in_gemeinsamen_bibliotheken">7.3.1. Überprüfen von Symbolen in gemeinsamen Bibliotheken</a></li>
<li><a href="#_verknüpfung_gemeinsamer_bibliotheken_mit_statischen_teilen_die_in_ausführenden_programmen_ebenso_auftauchen">7.3.2. Verknüpfung gemeinsamer Bibliotheken mit statischen Teilen (die in ausführenden Programmen ebenso auftauchen)</a></li>
<li><a href="#_fmu_von_fehlern_befreien">7.3.3. FMU von Fehlern befreien</a></li>
</ul>
</li>
<li><a href="#_innerhalb_von_mastersim">7.4. Innerhalb von MasterSim</a>
<ul class="sectlevel3">
<li><a href="#_datentypen">7.4.1. Datentypen</a></li>
<li><a href="#_verbindungsgraf_und_variable_zuordnung">7.4.2. Verbindungsgraf und variable Zuordnung</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_einführung_und_grundbegriffe">1. Einführung und Grundbegriffe</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>MasterSim</em> ist ein Co-Simulations-Masterprogramm, dass eine FMI-Co-Simulation unterstützt. Wenn die Co-Simulation für Sie etwas gänzlich Neues ist oder Sie mit dem funktionalen Mock-Up-Interface (FMI) noch nicht vertraut sind, empfehle ich Ihnen, zunächst ein wenig über die Grundlagen zu lesen, unter der <a href="https://fmi-standard.org">fmi-standard.org</a>-Web-Seite.</p>
</div>
<div class="paragraph">
<p>Grundsätzlich verbindet <em>MasterSim</em> verschiedene Simulationsmodelle und tauscht Daten zwischen Simulation-Slaves während der Laufzeit aus. Die folgende Grafik illustriert die Programmfunktion und ihren elementaren Ablauf.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/DataFlowDiagram.png" alt="Data flow diagram">
</div>
<div class="title">Figure 1. Diagramm über den Datenfluss und die Dateienanwendung</div>
</div>
<div class="sect2">
<h3 id="_die_teile_des_programms">1.1. Die Teile des Programms</h3>
<div class="paragraph">
<p><em>MasterSim</em> besteht aus zwei Teilen:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p>einer grafischen Benutzeroberfläche (GUI) und</p>
</li>
<li>
<p>dem Simulationsprogramm <em>MasterSimulator</em> für die Befehlszeilen</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Das GUI macht es sehr einfach, Simulations-Projekte zu erzeugen, anzupassen und abzuändern. Ein Simulations-Projekt wird in zwei Dateien gespeichert, dem <em>MasterSim</em>-Projekt und der Grafischen Darstellung. Letzteres ist optional und nicht notwendig für die Simulation.
Die Simulation wird durch das Befehlszeilen-Programm  <em>MasterSimulator</em> ausgeführt, welches Projekt-Dateien liest, ausgewiesene FMUs importiert und die Simulation umsetzt. Die erzeugten Ergebnisse, sowohl von <em>MasterSimulator</em> selbst als auch diejenigen möglicher anderer Slaves werden dann von allen weiterverarbeitenden Werkzeugen genutzt (z. B. <a href="https://bauklimatik-dresden.de/postproc">PostProc 2</a>), um die Ergebnisse zu visualisieren und zu analysieren.</p>
</div>
<div class="paragraph">
<p>Die Trennung zwischen der Benutzeroberfläche und dem aktuellen Simulator macht es sehr einfach, <em>MasterSim</em> in einer geskripteten Umgebung oder für eine systematische Variantenuntersuchung zu nutzen, wie sie weiter unten im Abschnitt <a href="#_workflows">Workflows</a> beschrieben wird.</p>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützte_fmu_varianten">1.2. Unterstützte FMU - Varianten</h3>
<div class="ulist">
<ul>
<li>
<p>FMI für die Co-Simulation in der Version 1</p>
</li>
<li>
<p>FMI für die Co-Simulation in der Version 2, inklusive der Unterstützung für abbauende/aufbauende Status</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Es werden keine asynchronen FMU-Varianten unterstützt.</p>
</div>
<div class="paragraph">
<p>Typischerweise ist  <em>MasterSim</em>  für Linux und MacOS nur als 64-Bit-Anwendung verfügbar. Für Windows ist  <em>MasterSim</em> auch als  32-Bit und 64-Bit-Anwendung vorhanden.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Nutzen Sie für 32-Bit-FMUs eine 32-Bit-Version, für 64-Bit-FMUs eine mit 64 Bit. Gemischte FMU-Plattform-Typen (32 Bit und 64 Bit) werden nicht unterstützt.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_konstruktionskriterien_schwerpunkte">1.3. Konstruktionskriterien/ Schwerpunkte</h3>
<div class="ulist">
<ul>
<li>
<p>Betriebssystemübergreifend: Windows, MacOS, Linux</p>
</li>
<li>
<p>keine Abhängigkeit von extern installierten Datenbanken, alle Quellen sind in der Version enthalten, insbesondere keine Abhängigkeit von FMI-unterstützenden Datenbanken (Ausnahme: Standard C++, und die Qt-5-Datenbanken); das Ausgliedern und Erstellen von Quell-Codes sollte leicht sein (ebenso das Packen für andere Plattformen)</p>
</li>
<li>
<p>vollständige, in die <em>MasterSim</em>-Datenbank eingebettete Master-Funktionalität, nutzbar über das Kommandozeilen-Werkzeug und das Programm GUI</p>
</li>
<li>
<p>eingebettete Nachrichtenverarbeitung, um GUI-Einbindung und Log-Datei-Support zu unterstützen, keine direkten <code>printf()</code>- oder `std::cout´ -Ausführungen</p>
</li>
<li>
<p>unterstützt FMU-Fehlerbehebung: kann das Entpacken deaktivieren (ständig: dll/so/dylib-Dateien), der Quellzugriff erlaubt die Fehlersuche während des Ladens von gemeinsam genutzten Datenbanken und angefügten Fehlersuchprogrammen</p>
</li>
<li>
<p>High-Level- C++-Code (lesbar und wartungsfreundlich)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>TODO: readable Korrektur im Original</p>
</div>
<div class="ulist">
<ul>
<li>
<p>enthält Instrumente, um Zähler und Timer für den Leistungsvergleich von Master-Algorithmen und FMU wiederherzustellen</p>
</li>
<li>
<p>der Code ist angepasst für die Fehleranalyse des Master-Algorhitmus - alle Variablen der typspezifischen Datenfelder im  <em>easy analysis in debugger</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Für Details über Funktionen, die insbesondere für FMU-Entwickler und bei Problemen der Fehlerbeseitigung von Co-Simulationen wichtig sind, lesen Sie bitte das Kapitel <a href="#_assistenzfunktionen_für_fmu_entwicklung_und_fehlerbeseitigung">Assistenzfunktionen für FMU-Entwicklung und Fehlerbeseitigung</a>.</p>
</div>
<div class="sect3">
<h4 id="_besondere_funktionen_von_mastersim">1.3.1. Besondere Funktionen von <em>MasterSim</em></h4>
<div class="paragraph">
<p>Es gibt eine besondere Funktion in <em>MasterSim</em>, welche hilfreich ist, um FMUs zu benutzen, die ihre eigenen Ausgabedaten verfassen. Um ein beschreibbares, <em>slave-spezifisches</em> Ausgabeverzeichnis für jeden Slave zur Verfügung zu stellen, setzt <em>MasterSim</em> den Parameter <code>ResultsRootDir</code> (normalerweise mit dem Referenzwert 42) für jeden Slave in diesem Verzeichnis. So lange ein Slave einen solchen Parameter definiert, besitzt der FMU-Code ein verlässliches, gültiges Verzeichnis zum Hineinschreiben seiner Daten. Siehe auch unter <a href="#_verzeichnis_slaves">Verzeichnis <em>Slaves</em></a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_terminologie">1.4. Terminologie</h3>
<div class="paragraph">
<p>Die folgenden Begriffe werden sowohl im Handbuch als auch in der Benennung von Klassen/Variablen genutzt:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
FMU
</td>
<td class="hdlist2">
<p>beschreibt das FMU-Archiv inklusive der Modellbeschreibung und der gemeinsamen Datenbanken</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Slave/Simulator
</td>
<td class="hdlist2">
<p>beschreibt ein Simulationsmodell, dass durch ein FMU realisiert/erstellt wird; dabei können mehrere Slaves durch ein einziges FMU realisiert werden, falls die Fähigkeit <strong>canBeInstantiatedOnlyOncePerProcess</strong> richtig eingestellt ist</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Master
</td>
<td class="hdlist2">
<p>beschreibt den gesamten Rahmen der Simulationskontrolle, der die generelle Verwaltungsarbeit übernimmt</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Simulationsszenario
</td>
<td class="hdlist2">
<p>definiert eine Reihe von Slaves und deren Verbindungen (Datenaustausch) ebenso gut wie andere Eigenschaften, wie z.B. Start- und Endzeit, algorithmische Optionen, Output-Einstellungen; alternativ <strong>system</strong> genannt</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Grafiknetzwerk
</td>
<td class="hdlist2">
<p>eine andere Beschreibung für die räumliche Struktur miteinander verbundener Slaves</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Masteralgorithmus
</td>
<td class="hdlist2">
<p>beschreibt die Implementierung eines mathematischen Algorithmus, der die gekoppelte Simulation zeitgleich fördert; kann ein Wiederholungs-Programm enthalten</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Fehlerkontrolle
</td>
<td class="hdlist2">
<p>meint eine lokale Fehlerüberprüfung (Schritt-für-Schritt), genutzt als schrittweises Korrekturschema</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Masterzeit
</td>
<td class="hdlist2">
<p>der Zeitpunkt der Mastersimulation startet mit 0; die Maßeinheit ist nicht strikt definiert (es muss eine gemeinsame Festlegung zwischen FMUs geben, normalerweise in Sekunden; Ausnahme: wenn Datei-Lese-Slaves verwendet werden; siehe Abschnitt <a href="#_csv_filereader_slaves">CSV-FileReader-Slaves</a>).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Gegenwärtige (Master-)Zeit
</td>
<td class="hdlist2">
<p>die Zeit, in der der Master-Status eingeschaltet ist; ändert sich <strong>einzig</strong> am Ende eines erfolgreichen <code>doStep()</code>- oder  <code>restoreState()</code>- Aufrufs.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_arbeitsablauf">1.5. Arbeitsablauf</h3>
<div class="paragraph">
<p>Wie alle anderen Simulationsmodelle, beinhalten die meisten Arbeitsabläufe eine Variantenanlyse. Im Kontext der Co-Simulation werden solche Varianten häufig durch die Modifizierung von FMUs und ihrer Parameter erzeugt. <em>MasterSim</em> enthält Funktionen, um diesen Arbeitsprozess zu optimieren.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Viele Arbeitsabläufe beinhalten mehrfache Ausführungen von <em>MasterSim</em> mit kleinen oder keinen Modifikationen in der Projektdatei. Manchmal ist ist es sehr komfortabel, die selbe Projektdatei zu nutzen und zu verändern, aber ein anderes Arbeitsverzeichnis (in dem Ausgänge gespeichert werden) zu bestimmen, damit das Resultat verschiedener Varianten verglichen werden kann.<br>
(Siehe das <code>--working-dir</code>-Befehlszeilenargument, beschrieben in Abschnitt <a href="#_arbeits-und_ausgangsverzeichnis">Arbeits-und Ausgangsverzeichnis</a>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_ersteinrichtung_eines_simulationsszenarios">1.5.1. Ersteinrichtung eines Simulationsszenarios</h4>
<div class="paragraph">
<p>Das ist die einfache Vorgehensweise:</p>
</div>
<div class="paragraph">
<p>TODO: Sie oder du?</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Importieren Sie alle FMUs und weisen Sie Slave-ID-Namen zu.</p>
</li>
<li>
<p>(optional) Legen Sie Parametermeterwerte für die Slaves fest.</p>
</li>
<li>
<p>(optional) Definieren Sie die grafische Darstellung der Slaves.</p>
</li>
<li>
<p>Verbinden Sie die Ausgangs- und Eingangsgrößen.</p>
</li>
<li>
<p>Bestimmen Sie die Simulationsparameter.</p>
</li>
<li>
<p>Führen Sie eine Simulation durch.</p>
</li>
<li>
<p>Prüfen Sie die Ergebnisse.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_nur_publizierte_fmu_parameter_sind_modifiziert">1.5.2. Nur publizierte FMU-Parameter sind modifiziert</h4>
<div class="paragraph">
<p>Ein sehr einfacher Fall und, wenn von FMUs unterstützt, durchaus eine bewährte Methode. In <em>MasterSim</em> müssen nur die den publizierten Parametern zugewiesenen Werte geändert werden (dies kann auch direkt in der Projekt-Datei getan werden, z. B. mittels Skript) und die Simulation kann wiederholt werden.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fmus_ändern_das_interne_verhalten_aber_nicht_die_oberfläche">1.5.3. FMUs ändern das interne Verhalten, aber nicht die Oberfläche</h4>
<div class="paragraph">
<p>Dies ist am häufigsten der Fall. Hier bleiben die Namen der Eingangs- und Ausgangsgrößen unverändert. Auch die publizierten Parameter bleiben gleich. Jedoch ändert sich das interne Verhalten der Betriebsart aufgrund der Anpassung des internen Modellverhaltens, wonach das FMU nochmals exportiert wurde. Da <em>MasterSim</em> nur noch auf FMUs Bezug nimmt, können FMU-Dateien in solchen Fällen einfach ersetzt und der Simulator ohne weitere Anpassungen gestartet werden.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fmus_ändern_parameter_aber_nicht_die_ein_und_ausgangsgrößen">1.5.4. FMUs ändern Parameter aber nicht die Ein- und Ausgangsgrößen</h4>
<div class="paragraph">
<p>In dieser Situation, in der ein Parameter in <em>MasterSim</em> konfiguriert worden ist, der nicht länger existiert (oder dessen Name geändert wurde), muss die entsprechende Definition in der Projekt-Datei geändert oder von der Benutzeroberfläche entfernt werden.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fmus_ändern_die_oberfläche">1.5.5. FMUs ändern die Oberfläche</h4>
<div class="paragraph">
<p>Wenn eine importierte FMU einen Teil ihrer Oberfläche ändert (z. B. sind Ein- oder Ausgangsgrößen modifiziert), dann wird dies in der Benutzeroberfläche durch Hervorhebung der falschen Verbindungen angezeigt.  Wenn nur der Teil einer Größe verändert wurde, editieren Sie am besten die Projekt-Datei und benennen dort die Größenbezeichnung um. Ansonsten einfach die Verbindung entfernen und eine neue schaffen.</p>
</div>
<div class="paragraph">
<p>Wenn sich der Variablentyp in eine Eingangs-/Ausgangsgröße ändert, sodass eine ungültige Verbindung entsteht (oder die Kausalität geändert wird), dann zeigt die Benutzeroberfläche die ungültige Verbindung nicht unbedingt direkt an. Allerdings wird das Befehlszeilenprogramm des  <em>MasterSimulator</em> den Fehler während der Initialisierung anzeigen und abbrechen.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ein_überblick_über_den_simulations_algorithmus">1.6. Ein Überblick über den Simulations-Algorithmus</h3>
<div class="paragraph">
<p><em>MasterSim</em> hat folgende zentrale Bausteine:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Initialisierung (Lesen der Projekt-Datei, Extraktion von FMUs, Überprüfung &#8230;&#8203;)</p>
</li>
<li>
<p>Ausgangsbedingungen</p>
</li>
<li>
<p>Korrekturschleife während der Laufzeit</p>
</li>
<li>
<p>Master-Algorithmus (d.h. er versucht Maßnahmen zu ergreifen)</p>
</li>
<li>
<p>Fehleranalyse</p>
</li>
<li>
<p>Ausgangsschreiben nach Festlegung</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Diese Bausteine werden nachfolgend näher erläutert.</p>
</div>
</div>
<div class="sect2">
<h3 id="_initialisierung">1.7. Initialisierung</h3>
<div class="paragraph">
<p>Zu Beginn der aktuellen Simulation (das Befehlszeilenprogramm <em>MasterSimulator</em>, siehe Abschnitt <a href="#_befehlszeilen_argumente_line_arguments">Befehlszeilen-Argumente </a> für Details zum Betrieb) wird die Struktur des Arbeitsverzeichnisses erzeugt und das Schreiben der Log-Datei gestartet.</p>
</div>
<div class="paragraph">
<p>Danach wird die Projekt-Datei gelesen und alle diesbezüglichen FMUs werden ausgewählt. Wenn Verweise auf CSV-Dateien auftauchen (siehe Abschnitt <a href="#_csv_filereader_slaves">CSV-FileReader-Slaves</a>), sind diese Dateien gegliedert und für Kalkulationen eingerichtet.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Auszüge aus dem FMU-Archiv können mit der Befehlszeilen-Option <code>--skip-unzip</code> (siehe Abschnitt <a href="#_modifikationfixierung_des_fmu_inhalts">Modifikation/Fixierung des FMU-Inhalts</a>) übersprungen werden.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>TODO: library = Datenbank?</p>
</div>
<div class="paragraph">
<p>Als erster Schritt der aktuellen Co-Sim-Initialisierung werden alle FMU-Slaves realisiert (dynamische Datenbanken werden geladen und Symbole importiert, danach wird <code>fmiInstantiateSlave()</code> oder <code>fmi2Instantiate()</code> aufgerufen für jeweils FMI 1.0- und FMI 2.0-Slaves). Es folgt eine Sammlung aller Austauschvariablen und das Erstellen einer variablen Kartierung.</p>
</div>
<div class="paragraph">
<p>Jeder während der Initialisierung aufgedeckte Fehler führt zu einem Abbruch des Simulators.</p>
</div>
<div class="sect3">
<h4 id="_ausgangsbedingungen">1.7.1. Ausgangsbedingungen</h4>
<div class="paragraph">
<p>Die erste Aufgabe des Simulators ist es, für alle Slaves konsistente Anfangswerte zu schaffen. Das ist eine bereits nicht unbedeutende Aufgabe und nicht in allen Fällen ist der Erfolg garantiert. Der einzige Vorgang, für den FMI-1- und FMI-2-Slaves zum Einsatz kommen können, ist der, schrittweise die Eingangs- und Ausgangsgrößen in allen Slaves zu erhalten und zu setzen, in wiederholender Weise, bis keine Änderungen mehr beobachtet werden.</p>
</div>
<div class="paragraph">
<p>TODO: sinnvolle Übersetzung "loop over" ?</p>
</div>
<div class="paragraph">
<p>Der Algorithmus in <em>MasterSim</em> ist:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Lassen Sie alle Slaves folgende Schritte durchlaufen:
  - rufen Sie setupExperiment() für den aktuellen Slave auf
  - setzen Sie alle Variablen der Kausalitäten EINGANG oder PARAMETER auf ihre normalen Werte, wie sie in bei modelDescription.xml gegeben sind
  - setzen Sie alle Parameter auf den in der Projektdatei spezialisierten Wert (falls Werte zugewiesen worden)

für FMI 2: befehlen Sie allen Slaves: enterInitializationMode()

ein Zyklus  mit drei Wiederholungen:
  lassen Sie alle Slaves folgende Schritte durchlaufen:
    nehmen Sie alle Ausgänge der aktuellen Slaves und speichern Sie sie in der umfassenden Variablen-Abbildung
  lassen Sie alle SLaves folgende Schritte durchlaufen:
    setzen Sie für alle Eingangsvariablen Werte aus der umfassenden Variablen-Abbildung ein

für FMI 2: befehlen Sie allen Slaves: exitInitializationMode()</pre>
</div>
</div>
<div class="paragraph">
<p>Beachten Sie: Der anfängliche Berechnungsalgorithmus ist derzeit ein Gauss-Jacobi-Algorithmus und als solcher nicht übermäßig stabil oder effizient.</p>
</div>
<div class="paragraph">
<p>TODO: Fehler im Original: iterations</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Wenn Sie mehr als 3 Slaves in einer Sequenz mit direkter Zufuhr von variablen Ein- zu Ausgängen verbunden haben, z. B. wenn die Ausgänge den Eingängen via Algebraischer Verbindungen zugeordnet sind, werden die 3 Wiederholungen des Gauss-Jacobi-Algorithmus eventuell nicht genügen, um alle Slaves korrekt zu initialisieren.</p>
</div>
<div class="paragraph">
<p>Dennoch, der Anteil an einer uneindeutigen Angabe im FMI-Standard, wird von  Co-Simulations-Slaves nicht eingefordert, um deren Ausgangsstatus zu aktualisieren, wann immer sich die Zufuhr ändert. Die meisten FMUs aktualisieren ihre Ausgangswerte tatsächlich erst nach der Aufforderung <code>doStep()</code>. Daher  ist es mit dem gegenwärtigen Standard nicht möglich, zwischen den direkten mathematischen Beziehungen von Aus- und Eingängen zu unterscheiden: <strong>without call</strong> zu <code>doStep()</code> und <strong>with a call</strong> zu <code>doStep()</code>.</p>
</div>
<div class="paragraph">
<p><em>MasterSim</em> zieht es vor, die Funktionalität von FMI 1.0 zu übernehmen (d. h. keine schrittweise Wiederholung), nur um Ein- und Ausgänge zu synchronisieren, unter der Voraussetzung, dass die Ausgänge sich nicht ändern (für die meisten FMUs sowieso), wenn die Eingänge auf andere Werte eingestellt sind. Unter dieser Bedingung sind 3 Wiederholungen immer ausreichend.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>TODO: Übersetzen von input/output sinnvoll?; communication=Datenübertragung?</p>
</div>
</div>
<div class="sect3">
<h4 id="_start_und_endzeit_der_simulation">1.7.2. Start- und Endzeit der Simulation</h4>
<div class="paragraph">
<p><em>MasterSim</em> betrachtet die Simulationszeit in <em>Sekunden</em>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Wenn die gekoppelten FMUs eine unterschiedliche Zeiteinheit verwenden (d. h. Jahre), benutzen Sie einfach Sekunden auf der Benutzeroberfläche und der Projektdatei und interpretieren die Werte als Jahre.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Die Simulationszeit ist auf der Benutzeroberfläche und der Projektdatei in Sekunden eingetragen (oder irgend einer anderen unterstützten Einheit, die in Sekunden umgewandelt werden kann). Während der Simulation werden alle erfassten Zeiten (Start- und Endzeit und die Zeitstufengrößen und Größenbegrenzung) zuerst in Sekunden umgewandelt und danach ohne irgend eine weitere Einheitenumrechnung benutzt.</p>
</div>
<div class="paragraph">
<p>Beispiel: Wenn Sie einen Endzeitpunkt auf <em>1 h</em> festlegen, wird der Master bis zur Simultionszeit <em>3600</em> laufen, welche dann als <em>Datenübertragungsintervall der Endzeit</em> im letzten <code>doStep()</code>-Aufruf gesendet wird.</p>
</div>
<div class="paragraph">
<p>Das gesamte Simulationszeit-Intervall wird an die Slaves im <code>setupExperiment()</code>-Aufruf weitergegeben. Wenn Sie die Startzeit anders als mit 0 festlegen, wird der Master-Simulator sein erstes Mitteilungsintervall zu diesem Zeitpunkt starten (der Slave braucht dies, um den <code>setupExperiment()</code>-Aufruf korrekt zu verarbeiten und den Slave zum Startzeitpunkt zu initialisieren).</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Der korrekte Umgang mit der Startzeit ist wichtig für alle FMUs, die eine Form der Bilanzierung oder Integration durchführen.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Die Endzeit der Simulation wird zum FMU auch per <code>setupExperiment()</code>-Aufruf (das Argument <code>stopTimeDefined</code> ist durch <em>MasterSim</em> immer auf <code>fmiTrue</code> gesetzt) überführt.</p>
</div>
<div class="paragraph">
<p>TODO: Übersetzung Solver sinnvoll?</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_die_umstellung_der_zeitschritte">1.8. Die Umstellung der Zeitschritte</h3>
<div class="paragraph">
<p>Irgendwann ist die Simulation abgeschlossen, der Solver gibt den Zyklus der umgestellten Zeitschritte an. Wenn die Umstellung der Zeitschritte über die Markierung <strong>adjustStepSize</strong> (siehe <a href="#_simulator_settings">Simulator settings</a>) gesperrt ist, wird die Wiederholung des Inhalts nur einmal ausgeführt. Für FMI-1.0-Slaves oder FMI-2.0-Slaves ohne die Fähigkeit zur Speicherung/Wiederherstellung des Slave-Status, ist die Wiederholung ebenfalls nicht möglich (tatsächlich löst das Abfragen eines Wiederholungs-Algorithmus für diese Slaves einen Fehler während der Initialisierung aus).</p>
</div>
<div class="paragraph">
<p>Innerhalb des Zyklus versucht der ausgewählte <em>Master-Algorithmus</em> einen einzelnen Schritt mit der gegenwärtig vorgeschlagenen Zeitschrittgröße (für eine konstante Schrittmethode, wird der <strong>hStart</strong>-Parameter genutzt)zu machen. Der <em>Master-Algorithmus</em> involviert eventuell eine wiederholende Auswertung der Slaves (siehe unten).</p>
</div>
<div class="paragraph">
<p>Für einen sich wiederholenden Master-Algorithmus ist es vielleicht möglich, dass die Methode nicht innerhalb des gegebenen Limits konvergiert (siehe Parameter <strong>maxIterations</strong>).</p>
</div>
<div class="paragraph">
<p>TODO: time step übersetzen?</p>
</div>
<div class="sect3">
<h4 id="_zeitschritt_verringerung_wenn_der_algorithmus_nicht_konvergiert">1.8.1. Zeitschritt-Verringerung, wenn der Algorithmus nicht konvergiert</h4>
<div class="paragraph">
<p>Wenn der Algorithmus nicht innerhalb des vorgegebenen Wiederholungslimits konvergiert, wird die Datenübertragung der Schrittgröße um den Faktor 5 reduziert:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>h_new = h/5</pre>
</div>
</div>
<div class="paragraph">
<p>Der Faktor 5 ist so ausgewählt, dass die Zeitschrittgröße schnell reduziert werden kann. Zum Beispiel, wenn eine Unterbrechung auftritt (z. B. ausgelöst durch eine schrittweise Änderung diskreter Signale) muss der Simulator die Zeitschritte schnell auf einen niedrigen Wert reduzieren, um die Schrittänderung zu überspringen.</p>
</div>
<div class="paragraph">
<p>Die Schrittgröße ist dann vergleichbar mit den Schritten des niedrigeren Datenübertragungs-Limits (Parameter <strong>hMin</strong>). Dies ist notwendig, um zu verhindern, dass die Simulation in extrem langsamen Zeitschritten stecken bleibt. Wenn die Schrittgröße unter den Wert von <strong>hMin</strong> reduziert würde, würde bei der Simulation die Fehlermeldung <strong>wird abgebrochen</strong> auftreten.</p>
</div>
<div class="paragraph">
<p>In manchen Fällen kann die Interaktion zwischen zwei Slaves das Konvergieren jedweder Master-Algorithmen verhindern (sogar den Newton-Algorithmus). Dennoch kann in diesen Fällen der verbleibende Fehler unerheblich sein und die Simulation kann in kleinen Schritten langsam über die problematische Zeit hinweggehen und danach die Schritte vergrößern. In diesen Fällen können Sie den Parameter <strong>hFallBackLimit</strong> festlegen, welcher größer sein muss als <strong>hMin</strong>. Wenn <em>h</em> auf einen Wert unter diese <em>zulässige</em> Mitteilungs-Schrittgröße reduziert ist, wird der Master-Algorithmus erfolgreich zurückkehren, nachdem alle Wiederholungen ausgeführt worden sind. Demnach wird der Schritt als <em>sich angenähert</em> behandelt und die Simulation geht zum nächsten Intervall weiter.</p>
</div>
<div class="paragraph">
<p>TODO: Fehler Original s.o. tiptoe; acceptable</p>
</div>
<div class="paragraph">
<p>Die oben angeführte Publikation illustriert das Verhalten der Simulation beim Benutzen der Parameter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fehlerkontrolle_und_zeitschritt_regulierung">1.8.2. Fehlerkontrolle und Zeitschritt-Regulierung</h4>
<div class="paragraph">
<p>Wenn eine Fehlertestmethode (<strong>ErrorControlMode</strong>) festgelegt ist, folgt einem konvergierendem Schritt eine lokale Fehlersuche. Derzeit basiert diese Fehlerprüfung auf der Schritt-Verdopplungs-Technik und kann als solche nur eingesetzt werden, wenn die Slaves FMI-2.0-Setzung/-Erhaltung der Statusfunktion unterstützen.</p>
</div>
<div class="paragraph">
<p>Grundsätzlich läuft der Test folgendermaßen ab:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>- Setzten Sie den Slave-Status zurück, um den Lauf des Kommunikationsintervalls zu starten.
- Nehmen Sie zwei Schritte (mit dem vollen Master-Algorithmus pro Schritt)
- Berechnen Sie Fehlerkriterien 1 und 2
- Setzen Sie den Status zurück zum Status nach dem ersten Master-Algorithmus</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Also, der Fehlertest benötigt zwei weitere Durchgänge des <em>Master-Algorithmus</em> per Datenübertragung. Für wiederholende Master-Algorithmen oder den Newton-Algorithmus kann der Aufwand für den Fehlertest erheblich sein.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Die mathematischen Formeln und detaillierte Berechnungen des Fehlertests sind in der folgenden Publikation dokumentiert:</p>
</div>
<div class="paragraph">
<p>Nicolai, A.: <em>Co-Simulation-Test Case: Predator-Prey (Lotka-Volterra) System</em> (siehe <a href="https://bauklimatik-dresden.de/mastersim/documentation.php">MasterSim Documentation Webpage</a>).</p>
</div>
<div class="paragraph">
<p>Die Fehlersuche nutzt die Parameter <code>relTol</code> und <code>absTol</code> um die akzeptable Differenz zwischen Voll- und Halbschritt einzugrenzen (oder deren Neigung). Abhängig von der lokalen Fehlerschätzung, existieren zwei Optionen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>die lokale Fehlerschätzung ist klein genug und der Zeitschritt wird vergrößert,</p>
</li>
<li>
<p>die Fehlersuche scheitert; die Schrittgröße wird entfernt und die gesamte Datenübertragung wird wiederholt werden.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Wenn Sie einen Fehlersuche-Algorithmus in <em>MasterSim</em> benutzen, sollten Sie ein Zeitschrittlimit für den Rückzug setzen. Andernfalls könnte <em>MasterSim</em> versuchen, die Dynamiken der Schrittänderung zu beseitigen, indem es die Zeitschritte auf extrem niedrige Werte justiert.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_master_algorithmen">1.9. Master-Algorithmen</h3>
<div class="paragraph">
<p>Ein <em>Master-Algorithmus</em> ist grundsätzlich die mathematische Prozedur, um die gekoppelte Simulation einen Schritt voran zu bringen. Solch ein Co-Simulations-Master-Algorithmus verfügt über ein charakteristisches Set an Regeln, um Werte von einem FMU abzurufen, wann und wie diese Werte an andere FMUs überführt werden und die Kriterien des Konvergierens von Wiederholungen.</p>
</div>
<div class="paragraph">
<p><em>MasterSim</em> führt mehrere Standard-Algorithmen durch. Eine detaillierte Diskussion über die unterschiedlichen Algorithmen und wie die Wahl von Algorithmen und Parametern Ergebnisse beeinflusst, kann in der folgenden Publikation nachgelesen werden:</p>
</div>
<div class="paragraph">
<p>Nicolai, A.: <em>Co-Simulations-Masteralgorithmen - Analyse und Details der Implementierung am Beispiel des Masterprogramms MASTERSIM</em>, <a href="http://nbn-resolving.de/urn:nbn:de:bsz:14-qucosa2-319735" class="bare">http://nbn-resolving.de/urn:nbn:de:bsz:14-qucosa2-319735</a> (in german)</p>
</div>
<div class="sect3">
<h4 id="_gauss_jacobi">1.9.1. Gauss-Jacobi</h4>
<div class="paragraph">
<p>Basis-Algorithmus:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>alle Slaves sollen folgende Schritte durchlaufen:
wiederholen aller Ausgangswerte


alle Slaves sollen folgende Schritte durchlaufen:
  setzen aller Eingangswerte
  dem Slave sagen. einen Schritt zu tun</pre>
</div>
</div>
<div class="paragraph">
<p>Gauss-Jacobi ist ohne Wiederholung fertig ausgeführt. Wie in der Publikation gezeigt (siehe oben), ergibt es wirklich keinen Sinn, eine Wiederholung zu nutzen.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Anstatt einen Schritt zur Datenübertragung für 10 Sekunden zu nutzen und Gauss-Jacobi für 2 Wiederholungen zu nutzen, ist es effizienter Wiederholungen zu deaktivieren (festlegen von <strong>maxIterations=1</strong>) und die Größe der Datenübertragungsschritte auf 5 Sekunden zu begrenzen. Der Aufwand für die Simultion ist exakt der gleiche, jedoch läuft die Simulation akkurater ab (und stabiler) mit dem 5-sekündigem Datenübertragungsintervall.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_gauss_seidel">1.9.2. Gauss-Seidel</h4>
<div class="paragraph">
<p>Basis-Algorithmus:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Wiederholungsschleife:
  Durchlaufstationen aller Slaves:
    setzen der Eingangswerte für Slaves aus der globalen Werteliste
    den Slave veranlassen, einen Schritt zu tun
    wiederherstellen des Ausgangs aus dem gegenwärtigen Slave
    Erneuern der globalen Variablenliste
  eine konvergierende Prüfung durchführen</pre>
</div>
</div>
<div class="sect4">
<h5 id="_zyklen">Zyklen</h5>
<div class="paragraph">
<p><em>MasterSim</em> enthält eine Funktion, die die Rechenleistung reduziert, wenn viele FMUs involviert sind und nicht alle direkt miteinander verbunden sind. Die folgende Figur zeigt ein Simulationsszenario, in dem die Berechnung in Stufen ausgeführt werden kann.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/algorithm_cycles.png" alt="Cycles in iterative algorithms">
</div>
<div class="title">Figure 2. Zyklen in sich wiederholenden Algorithmen</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
(1)
</td>
<td class="hdlist2">
<p>Dieses FMU erzeugt nur Ausgänge und kann nur ein einziges Mal im Gauss-Seidel-Algorithmus untersucht werden.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(2)
</td>
<td class="hdlist2">
<p>Diese zwei FMUs tauschen Werte aus, sie sind in einem <em>Zyklus</em>. Wenn der Gauss-Seidel-Algorithmus mit aktivierter Wiederholung ausgeführt wird, brauchen nur diese beiden FMUs aktualisiert werden und sie müssen Werte austauschen, denn sie erfordern keinen Eingang von anderen FMUs (außer für das Erste, dessen Ausgangsvariablen sind bereits bekannt).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(3)
</td>
<td class="hdlist2">
<p>Die letzten beiden FMUs sind auch in einem Zyklus gekoppelt, aber nur miteinander. Sie werden in der letzten Phase/Zyklus wiederholt. Bis die Ergebnisse der anderen drei FMUs berechnet worden und bekannt sind, müssen wieder nur drei FMUs im Zyklus sein.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>TODO: Korrektur Original: relation</p>
</div>
<div class="paragraph">
<p>Die Anzahl an FMUs in einem Zyklus zu begrenzen, reduziert nicht nur den gesamten Aufwand, sondern berücksichtigt auch die Starre der Kopplung. In einem Zyklus können die FMUs nur lose miteinander verbunden sein und die Konvergenz ist mit 2 oder 3 Wiederholungen erreicht. In anderen Zyklen können die FMUs in einer nicht linearen Verbindung gekoppelt sein oder sensibler auf Änderungen der Eingangswerte reagieren (= starre Kopplung) und zehn oder mehr Wiederholungen können benötigt werden. Dieses, das Vereinzeln der Zyklen, kann die Rechenleistung bei der Gauss-Seidel signifikant reduzieren.</p>
</div>
<div class="paragraph">
<p>Jedes FMU kann einem Zyklus zugewiesen sein, welcher nummeriert ist (Beginn bei 0) und in der Reihenfolge der Zyklusnummer ausgeführt wird (siehe Simulatordefinition im Abschnitt <a href="#_Simulator-Slave-Definitionen">Simulator-/Slave- Definitionen</a>).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_newton">1.9.3. Newton</h4>
<div class="paragraph">
<p>Basis-Algorithmus:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Wiederholungsschleife:
  Berechnen Sie in der ersten Wiederholung die Newtonmatrix via Angleichung des  Differenzquotienten

  Lassen sie alle Slaves Folgendes durchlaufen:
    Legen Sie alle Eingangswerte fest
    Befehlen Sie dem Slave, einen Schritt zu machen

  Lassen alle Slaves Folgendes durchlaufen:
    Rufen Sie alle Ausgangswerte ab

  Lösen Sie das Gleichungssystem
  Berechnen Sie die Abweichung der Variablen

  Führen Sie einen Konvergenz-Test durch</pre>
</div>
</div>
<div class="paragraph">
<p>Zyklen werden genauso behandelt wie mit dem Gauss-Seidel.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Für den Fall, dass nur ein einziger FMU innerhalb des Zyklus ist, wird der Newton-Master-Algorithmus dieses FMU nur einmal auswerten und die Ergebnisse als bereits konvergiert behandeln. Natürlich wird in diesem Fall keine Newton-Matrix benötigt und verfasst. Allerdings wird es in dem (seltenen) Fall, dass ein solches FMU seine Eingangswerte mit <em>seinen eigenen Ausgängen</em> verbindet, vielleicht zu Problemen führen, bis die potentiell ungültigen FMU-Bedingungen akzeptiert werden.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ausgänge_schreiben">1.10. Ausgänge schreiben</h3>
<div class="paragraph">
<p>Ausgänge werden nach jedem vollendeten Schritt geschrieben, aber nur, wenn die Zeitspanne seit dem letzten Ausgangs-Schreiben mindestens so lang ist wie im Parameter <strong>hOutputMin</strong> festgelegt.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Wenn Sie Ausgänge wirklich nach jedem internen Schritt haben wollen, setzten Sie <strong>hOutputMin</strong> auf 0.
</td>
</tr>
</table>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_grafische_benutzeroberfläche">2. Grafische Benutzeroberfläche</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>MasterSim</em> verfügt über eine einigermaßen komfortable grafische Benutzeroberfläche, um <em>Simulations-Szenarios</em> festzulegen und anzupassen. Mit <em>Simulations-Szenario</em> meine ich die Definition derjenigen FMUs, die einen Slave (oder Slaves) definieren und realisieren wie man Eingangs-und Ausgangsvariablen verbindet und alle Eigenschaften im Zusammenhang mit Rechenalgorithmen. Grundsätzlich alles, das gebraucht wird, um eine Co-Simulation durchzuführen.</p>
</div>
<div class="sect2">
<h3 id="_startseite">2.1. Startseite</h3>
<div class="paragraph">
<p>Die Software beginnt mit einer Startseite, welche grundsätzlich eine Liste kürzlich verwendeter Projekte und einiger webbasierter Neuigkeiten enthält(diese werden von der Datei <a href="https://bauklimatik-dresden.de/downloads/mastersim/news.html" class="bare">https://bauklimatik-dresden.de/downloads/mastersim/news.html</a> bezogen, welche aktualisiert wird, sobald eine neue Veröffentlichung oder Funktion zur Verfügung steht).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gui_welcome_page.png" alt="Welcome page">
</div>
<div class="title">Figure 3. Startseite mit kürzlich verwendeten Projekten und webbasierten Neuigkeiten</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
(1)
</td>
<td class="hdlist2">
<p>Miniaturansicht mit der Vorschau eines Simulations-Szenarios</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(2)
</td>
<td class="hdlist2">
<p>Kurze Beschreibung des Projekts. Die Beschreibung entstammt der Kommentarzeile der Projektzeilenüberschriften (siehe <a href="#_project_file_format">Project file format</a>).</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Die auf der Startseite angezeigten Miniaturansichten werden erzeugt/aktualisiert, wenn das Projekt gesichert wurde. Die Dateien sind innerhalb des Benutzerverzeichnisses platziert:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>bei Windows in <code>%APPDATA\Roaming\MasterSim\thumbs</code> und</p>
</li>
<li>
<p>bei Linux/MacOS in <code>~/.local/share/MasterSim</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>und die Bilddatei ist benannt wie die Projektdatei, erweitert um den Anhang <code>png</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_beispiele">2.1.1. Beispiele</h4>
<div class="paragraph">
<p>Beim Öffnen eines Beispiels von der Startseite/Beispielseite, werden Sie aufgefordert, das Projekt zunächst in einer benutzerdefinierten Stelle zu sichern (Beispiele werden im Installationsverzeichnis angegeben, welche gewöhnlich schreibgeschützt sind).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_symbolleiste_und_nützliche_tastenkombinationen">2.2. Symbolleiste und nützliche Tastenkombinationen</h3>
<div class="paragraph">
<p>So schnell ein Projekt hergestellt/geöffnet ist, wird eine der Projektinhaltsansichten gezeigt und eine Symbolleiste an der linken Seite des Programms angezeigt. Die Zeichen der Symbolleiste haben die folgenden Funktionen (sie werden auch beim Antippen angezeigt, wenn man mit dem Mauszeiger über den Button fährt):</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Programm&#160;Information
</td>
<td class="hdlist2">
<p>Zeigt die Programminformation</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Create new
</td>
<td class="hdlist2">
<p>Erzeugt ein neues Projekt (Kürzel <strong>Ctrl + N</strong>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Open project
</td>
<td class="hdlist2">
<p>Öffnet eine <code>*.msim</code>-Projektdatei (Kürzel <strong>Ctrl + O</strong>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Save project
</td>
<td class="hdlist2">
<p>Sichert das aktuelle Projekt (Kürzel <strong>Ctrl + S</strong>) (sichert außerdem die Netzwerkpräsentation)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Open PostProc
</td>
<td class="hdlist2">
<p>Öffnet das Nachbearbeitungswerkzeug, angegeben im Einstellungsdialog. Obwohl ich empfelen würde <a href="https://bauklimatik-dresden.de/postproc">PostProc 2</a> zu nutzen. Sie können hier jede andere Nachbearbeitungs-Software starten oder sogar ein automatisches Analyseskript. Setzen Sie einfach die entsprechende Kommentarzeile in den bevorzugten Dialog.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
FMU Analysis
</td>
<td class="hdlist2">
<p><em>MasterSim</em> kann alle referenzierten FMUs entpacken und deren Modellbeschreibungs-Dateien lesen. Es aktualisiert außerdem die grafischen Schemata und Verbindungsansichten, wenn die FMU-Oberflächen sich geändert haben. Ebenso wird die Eigenschaftentabelle auf den neuesten Stand gebracht. Nutzen Sie diese Funktion, wenn Sie ein FMU im Dateiensystem aktualisiert haben und diese Änderungen in der <em>MasterSim</em>-Benutzeroberfläche reflektieren wollen (alternativ laden sie das Projekt einfach neu).</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>TODO: Korr.Orig. s.o. <em>thos</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Slave definition view</dt>
<dd>
<p>Wechselt zum <a href="#_slaves_definition_view">Slaves definition view</a>. Hier definieren Sie, welche FMUs wichtig sind und weisen Slaves Parameterwerte zu. Außerdem können Sie eine grafische Darstellung des Netzwerkes kreieren.</p>
</dd>
<dt class="hdlist1">Connection view</dt>
<dd>
<p>Wechselt zum  <a href="#_connection_view">Connection view</a>. Hier können Sie die Verbindungen zwischen den Slaves verwalten und spezielle Attribute (Transformationen) zwischen den Verbindungen zuweisen.</p>
</dd>
<dt class="hdlist1">Simulation settings view</dt>
<dd>
<p>Wechselt zum <a href="#_simulation_settings_view">Simulation settings view</a>. Alle Simulationsparameter und numerischen Algorithmusoptionen sind hier spezialisiert. Ebenso startet die tatsächliche Simulation von dieser Ansicht.</p>
</dd>
<dt class="hdlist1">Undo/Redo</dt>
<dd>
<p>Die nächsten zwei Buttons steuern die Funktionen rückgängig oder noch einmal machen der Benutzeroberfläche. Alle im Projekt gemachten Änderungen können zurückgenommen und noch einmal gemacht (Kürzel sind <strong>Ctrl + Z</strong> für rückgängig machen und <strong>Ctrl + Shift + Z</strong> für erneut tun).</p>
</dd>
<dt class="hdlist1">Language switch</dt>
<dd>
<p>Die nächsten Buttons öffnen ein Kontextmenü mit einer Sprachauswahl. Sie müssen die Anwendung neu starten, um die neue Sprachwahl zu aktivieren.</p>
</dd>
<dt class="hdlist1">Quit</dt>
<dd>
<p>Schließt die Software. Wenn das Projekt verändert worden ist, wird der Benutzer gefragt, ob er die Änderungen speichern oder verwerfen möchte.</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_nützliche_kürzel">2.2.1. Nützliche Kürzel</h4>
<div class="paragraph">
<p>Hier ist eine Liste der nützlichen programmweiten Tastaturkürzel:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Programmweite Tastenkombinationen</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Windows/Linux</th>
<th class="tableblock halign-left valign-top">MacOS</th>
<th class="tableblock halign-left valign-top">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ctrl + N</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>⌘ + N</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">erstellt ein neues Projekt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ctrl + O</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>⌘ + O</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lädt ein Projekt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ctrl + S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>⌘ + S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">speichert ein Projekt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ctrl + Shift + S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>⌘ + Shift + S</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">speichert das Projekt mit einem neuen Dateinamen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ctrl + Z</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>⌘ + Z</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rückgängig machen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Ctrl + Shift + Z</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>⌘ + Shift + Z</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">erneut versuchen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>F2</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>F2</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">öffnet die Projektdatei im Texteditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>F9</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>F9</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">startet die Simulation (kann von jeder Ansicht genutzt werden, keine Notwendigkeit zunächst zur Ansicht der Simulationsumgebung zu wechseln!)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>⌘ + .</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Öffnet den Präferenzen-Dialog</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_die_definierte_ansicht_von_slaves">2.3. Die definierte Ansicht von Slaves</h3>
<div class="paragraph">
<p>Der Eingang der Simulations-Szenarien ist in drei Ansichten aufgeteilt. Das Erstellen einer Simulation startet mit dem Importieren von Slaves. Somit ist die erste Ansicht (und die wichtigste), die für Slaves festgelegte.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gui_slave_view.png" alt="Slave view">
</div>
<div class="title">Figure 4. Die festgelegte Slave-Ansicht zeigt eine Liste importierter FMUs, zugewiesene Slave-ID-Namen und eine optionale grafische Darstellung.</div>
</div>
<div class="paragraph">
<p>Elemente der Ansicht:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
(1)
</td>
<td class="hdlist2">
<p>Fügt einen neuen Slave durch das Auswählen einer FMU-Datei (<code>*.fmu</code>) oder eines Datei-lese-Slaves zu (<code>csv</code> or <code>tsv</code> file, siehe Abschnitt <a href="#_csv_filereader_slaves">CSV FileReader Slaves</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(2)
</td>
<td class="hdlist2">
<p>Entfernt die gegenwärtig ausgwählten Slaves (und alle zu ihm gemachten Verbindungen)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(3)
</td>
<td class="hdlist2">
<p>Durch Doppelklicken wird die Farbe des Slaves geändert (die Farbe wird genutzt, um den Slave in der Verbindungsansicht identifizieren zu können)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(4)
</td>
<td class="hdlist2">
<p>Der ID-Name des Slaves. Standardmäßig weist <em>MasterSim</em> den Basisinamen des FMU-Datei-Pfades zu. Durch Doppelklicken dieser Zelle kann dies geändert werden. Beachten Sie: Slave-ID-namen müssen innerhalb des Simulations-Szenarios einzigartig sein.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(5)
</td>
<td class="hdlist2">
<p>Pfad zu einer FMU-Datei, entweder der absolute Pfad oder relativ zur aktuellen <em>MasterSim</em> -Projekt-Datei, abhängig vom Kontrollkästchen <em>"Show FMU paths relative to project file"</em>. Außerdem muss der Projektname gespeichert worden sein, bevor relative Pfade angezeigt werden können.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(6)
</td>
<td class="hdlist2">
<p>Definiert, in welchem Zyklus das FMU berechnet werden soll (im Standard sind alle Slaves im Zyklus 0 und damit alle als gekoppelt angenommen calculated. Siehe Beschreibung in <a href="#_master_algorithmus">Master- Algorithmus</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(7)
</td>
<td class="hdlist2">
<p>Aktivieren Sie den grafischen Verbindungsmodus (siehe Diskussion unten). Wenn dieser Modus aktiv ist, können Sie eine neue Verbindung von einem Ausgang zur Eingangsbuchse im Netzwerk ziehen.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(8)
</td>
<td class="hdlist2">
<p>Kopiert Netzwerkschemata für den Drucker oder als PDF-Datei.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(9)
</td>
<td class="hdlist2">
<p>Dies ist ein grafisches Netzwerkschema - rein optional, aber es hilft, zu verstehen, was Sie tun.</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Falls Sie mehrere Blöcke gleichzeitig umgestalten wollen, können sie viele Blöcke mittels <strong>Ctrl + Click</strong> am Stück auswählen. Wenn Sie einen der Blöcke verschieben, werden sich die anderen ausgewählten Blöcke ebenso bewegen.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_slaves_hinzufügen">2.3.1. Slaves hinzufügen</h4>
<div class="paragraph">
<p>Neue Slaves werden zugefügt durch das Auswählen von <code>fmu</code>- oder  <code>csv</code>- oder <code>tsv</code>-Dateien. <em>MasterSim</em> nutzt automatisch den Basisnamen der ausgewählten Datei als ID-Namen für den Slave. Falls bereits ein solcher ID-Name existiert, fügt <em>MasterSim</em> eine Nummer zum Basisnamen hinzu. In jedem Fall müssen die Slave-ID-Namen einzigartig innerhalb des Projekts sein.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Sie können das selbe FMU mehrere Male importieren, es sei denn das FMU hat die markierte Fähigkeit <strong>canBeInstantiatedOnlyOncePerProcess</strong> auf <em>false</em> gesetzt. In diesem Fall werden die Slaves unterschiedliche ID-Namen haben, trotzdem sie zur selben FMU-Datei referenziert werden. Parameter und das visuelle Auftreten können für einen Slave der selben FMU unterschiedlich gesetzt sein.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_eigenschaftenparameterwerte_der_slaves">2.3.2. Eigenschaften/Parameterwerte der Slaves</h4>
<div class="paragraph">
<p>Unterhalb der Tabelle mit den wichtigen Slaves ist eine Liste der von den FMUs publizierten Parameter. Die Liste ist bestimmt für den  <em>gegenwärtig ausgewählten</em> Slave. Ein Simulations-Slave kann in der Slave-Tabelle oder durch Anklicken eines Blocks in der Netzwerkansicht ausgewählt werden.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gui_slave_view_properties.png" alt="Slave parameter table">
</div>
<div class="title">Figure 5. Tabelle mit Slave-spezifischen Parameterwerten</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
(1)
</td>
<td class="hdlist2">
<p>Schwarze und fette Schriftzeichen geben an, dass dieser Parameter modifiziert oder auf einen bestimmten Wert gesetzt worden ist. Grauer, kursiver Text zeigt einen standardmäßigen, unveränderten Wert.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(2)
</td>
<td class="hdlist2">
<p>Fährt man mit der Maus über einen Parameterwert, zeigt sich ein Werkzeughinweis mit den Standardparametern. Dies kann genutzt werden, um den Standardwert zu sehen, für den Fall, dass ein Parameter geändert worden ist.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(3)
</td>
<td class="hdlist2">
<p>Parameter, die in schwarzer Fettschrift geschrieben sind, wurden von <em>MasterSim</em> festgelegt (während der Initialisierung).</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Parameter können durch <strong>Doppeklicken</strong> der Wertezelle editiert werden und einen Wert eingeben. Das Bereinigen des Inhalts der Zelle setzt die Parameter auf ihre standardmäßigen Werte zurück.</p>
</div>
</div>
<div class="sect3">
<h4 id="_netzwerkansicht">2.3.3. Netzwerkansicht</h4>
<div class="paragraph">
<p>Die Netzwerkansicht <strong>(9)</strong> zeigt ein simples Schema aller FMU-Slaves und ihrer Verbindungen.  Diese Netzwerkansicht ist optional und wird für die Simulation nicht wirklich gebraucht. Dennoch ist die visuelle Darstellung des Simulations-Szenarios wichtig für die Kommunikation.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Sie können in die Netzwerkansicht heraus- und hineinzoomen, indem Sie mit den Scroll-Knopf der Maus nutzen. Es wird zu der Stelle gezoomt, an der sich der Mauszeiger befindet.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Das Netzwerk zeigt <strong><em>Blöcke</em></strong> (angepasst an die Simulatoren/Slaves) und in jedem Block einen weiteren <strong><em>Sockel</em></strong>. Sockel zeigen die Eingangs-/Ausgangsvariablen eines jeden Simuations-Slaves an. Die Blöcke werden in unterschiedlichen Farben angezeigt, die individuellen <a href="#block_states">block states</a> anzeigend.</p>
</div>
<div class="sect4">
<h5 id="_verbindungen_in_der_netzwerkansicht_herstellen">Verbindungen in der Netzwerkansicht herstellen</h5>
<div class="paragraph">
<p>Sie können eine neue Verbindung zwischen Ein- und Ausgängen von Slaves herstellen, indem Sie zunächst das Netzwerk in den  <em>connection mode</em> versetzen durch das Drücken des Buttons <strong>(7)</strong>. Wenn der Verbindungsmodus hergestellt ist, wandelt sich der Zeiger innerhalb des Netzwerkansicht-Fensters zu einem Kreuz. Sie können die Maus dann über einen Ausgangssockel bewegen (Triangel). <em>Drücken und halten</em> Sie den Maus-Button und zeigen Sie die Verbindung zu einem <em>freien</em> Eingangssockel (leerer Halbkreis). Wenn die Verbindung einmal hergestellt worden ist, wird der Verbindungsmodus wieder ausgeschaltet und die Blöcke und Verbindungen können bewegt werden.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Sie können den <em>Verbindungsmodus</em> verlassen, indem Sie den Rechtsklick in der Netzwerkansicht drücken.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Verbindungen zwischen Slaves können bequemer festgelegt werden in der <a href="#_connection_view">Connection view</a> (welche ebenso effizienter ist, wenn mehr Verbindungen hergestellt werden, vergleichbar zum manuellen Ziehen der Verbindung mit der Maus).</p>
</div>
</div>
<div class="sect4">
<h5 id="_blockstatus">Blockstatus</h5>
<div class="paragraph">
<p>Da <em>MasterSim</em> nur auf FMUs Bezug nimmt, wird deren eigentlicher Inhalt  their actual content (z. B. Anschlusseigenschaften von <code>modelDescription.xml</code>)nur ersichtlich, wenn sie importiert worden. Der FMU-Import und der Analyseschritt werden automatisch vorgenommen, wenn ein Projekt geöffnet ist und ein neuer FMU-Slave hinzugefügt wird.</p>
</div>
<div class="paragraph">
<p>Beim Importieren des FMU versucht die Benutzeroberfläche das FMU-Archiv zu entpacken und dessen Inhalt zu analysieren. Wenn die <code>modelDescription.xml</code>-Datei korrekt gelesen werden kann, wird <em>MasterSim</em> anbieten den Block-Editor zu öffnen. Innerhalb des Editors können Sie grundlegende Geometrie des Blocks (SLave-Darstellung) und die Gestaltung der Sockel (die Position der Eingangs-/Ausgangsvariablen). Sie können die Aufforderung ignorieren und die visuelle FMU-Darstellung verlassen ohne darstellerische Festlegungen. Grundsätzlich kann ein FMU drei Status haben, die in der UI unterschiedlich visualisiert sind:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/bm_block_states.png" alt="Block states">
</div>
<div class="title">Figure 6. Unterschiedlicher Status von Blöcken und deren visuelles Erscheinen</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
(1)
</td>
<td class="hdlist2">
<p>Die entsprechende <code>fmu</code>-Datei existiert nicht oder kann nicht gelesen werden (kein Pack-Archiv, kann nicht extrahiert werden, beinhaltet keine <code>modelDescription.xml</code>-Datei oder keine gültige Datei,&#8230;&#8203;viele Dinge können hier schief gehen)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(2)
</td>
<td class="hdlist2">
<p>Die Modellbeschreibung wurde für diesen Slave erfolgreich analysiert, aber die Blockdefinition stimmt nicht mit dem Anschluss überein (bis jetzt). Typischerweise hat die Definition eines zugehörigen Blocks noch keine Sockel definiert oder gestaltet, wenn ein FMU zum ersten Mal importiert wird. Es wird dann eine einfache rote Box angezeigt. Sie können diese Box  <strong>doppelt anklicken</strong>, um den Block-Editor zu öffnen.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(3)
</td>
<td class="hdlist2">
<p>Der Block ist festgelegt worden und die Sockel passen zu diesem und werden durch die Modellbeschreibung angezeigt (Name und Eingangs-/Ausgangstypen).</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_block_editor">2.3.4. Block-Editor</h4>
<div class="paragraph">
<p>Der Block-Editor erlaubt Ihnen, die grundlegende, rechteckige Gestalt Ihres FMU festzulegen und die Sockel zu gestalten. Der Block-Editor wird entweder direkt nach dem Import eines FMU geöffnet oder indem Sie auf einen Block in der Netzwerkansicht <strong>doppelklicken</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/bm_block_editor.png" alt="Block Editor">
</div>
<div class="title">Figure 7. Editor für die Blockgeometrie und die Gestaltung des Sockels</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
(1)
</td>
<td class="hdlist2">
<p>Slave-ID-Name</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(2)
</td>
<td class="hdlist2">
<p>Zeigt die Anzahl der veröffentlichten Eingangs- und Ausgangsvariablen</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(3)
</td>
<td class="hdlist2">
<p>Wenn es getestet wird, wird das FMU-Archiv nach der Image-Datei <code>model.png</code> durchsucht (die sollte neben der <code>modelDescription.xml</code>-Datei im Hauptverzeichnis des FMU-Archivs sein). Und wenn vorhanden, wird das Bild skaliert nach der Blockgröße angezeigt.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(4)
</td>
<td class="hdlist2">
<p>Hier können Sie die Weite und Höhe des Blocks in Rasterlinien festlegen.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(5)
</td>
<td class="hdlist2">
<p>Dieser Knopf gestaltet die Sockel. Eingänge sind an der linken, oberen Seite ausgerichtet, Ausgänge an der rechten, unteren Seite. Falls es nicht genügend Platz für alle Sockel gibt, werden die verbleibenden Sockel übereinander platziert.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(6)
</td>
<td class="hdlist2">
<p>Verweist auf einen Eingangssockel (Eingangsvariable)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(7)
</td>
<td class="hdlist2">
<p>Verweist auf einen Ausgangssockel (Ausgangsvariable)</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
In einer der nächsten Programmversionen wird es möglich sein, das Erscheinungsbild eines Blocks als Vorlage für die zukünftige Nutzung ähnlicher oder gleicher FMUs zu speichern. Gegenwärtig müssen Sie den Block jedes Mal, wenn Sie einen FMU importieren, konfigurieren. Ebenso ist die verbesserte Anwendung und der benutzerdefinierte Sockel-Speicherort noch nicht umgesetzt.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ansichten_verknüpfen">2.4. Ansichten verknüpfen</h3>
<div class="paragraph">
<p>In dieser Ansicht können Sie Slaves verknüpfen, indem Sie Ausgangs- und Eingangsvariablen abbilden.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gui_connection_view.png" alt="Connection view">
</div>
<div class="title">Figure 8. Verknüpfte Ansicht mit aufgezeigten Eingangs- und Ausgangsvariablen für alle Slaves und festgelegten Verbindungen</div>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
(1)
</td>
<td class="hdlist2">
<p>Zeigt alle publizierten Ausgangs- und Eingangsvariablen aller Slaves.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(2)
</td>
<td class="hdlist2">
<p>Zeigt die Eingangsvariablen aller Slaves, welche noch <strong>nicht</strong> verbunden worden sind.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(3)
</td>
<td class="hdlist2">
<p>Wählen Sie zunächst eine Ausgangsvariable und die Eingangsvariable aus, die mit dem Ausgang verbunden werden soll und drücken Sie dann diesen Button, um eine Verbindung herzustellen.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(4)
</td>
<td class="hdlist2">
<p>Hier können Sie viele Verknüpfungen zwischen zwei Slaves verschiedener Namen erstellen (siehe Erklärung unten)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(5)
</td>
<td class="hdlist2">
<p>Dies macht die aktuell ausgewählte Verbindung in der Tabelle (6) rückgängig</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(6)
</td>
<td class="hdlist2">
<p>Zeigt alle bisher erzeugten Verknüpfungen. Durch einen <strong>Doppelklick</strong> auf die letzte Spalte wird die Umwandlungstätigkeit in Auftrag gegeben.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(7)
</td>
<td class="hdlist2">
<p>Eine Tabelle mit allen Slaves und deren Farben (um die Identifikation der Variablen nach Farbe zu unterstützen)</p>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_die_besonderheiten_automatischer_verbindungen">2.4.1. Die Besonderheiten automatischer Verbindungen</h4>
<div class="paragraph">
<p>Diese Funktion ist sehr hilfreich, wenn FMUs miteinander verbunden sind und Ausgangs- und Eingangsvariablen zweier Slaves den selben Namen haben. Dies ist insbesondere hilfreich, wenn Sie viele Eingangs- und Ausgangsvariablen zwischen zwei Slaves verbinden müssen. Falls Sie ein FMU auf diese Weise erzeugen, können Sie den folgenden Ablauf nutzen:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>wählen sie in den Kombinationsfeldern die zu verbindenden Slaves aus</p>
</li>
<li>
<p>drücken Sie den Verbindungs-Button</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Eine Verbindung wird erstellt, wenn:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>der Variablenname passt</p>
</li>
<li>
<p>der Datentyp der Variable passt</p>
</li>
<li>
<p>eine Variable einen Kausalitäts-<em>Eingang</em> hat und die andere einen Kausalitäts-<em>Ausgang</em></p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title">Example 1. Automatische Verknüpfung zweier Slaves</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Slave1 publiziert:</p>
<div class="ulist">
<ul>
<li>
<p>Raum1.Temperatur (real, Ausgang)</p>
</li>
<li>
<p>Raum1.Heizkraft (real, Eingang)</p>
</li>
<li>
<p>Raum1.Betriebstemperatur (real, Ausgang)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Slave2 publiziert:</p>
<div class="ulist">
<ul>
<li>
<p>Raum1.Temperatur (real, Eingang)</p>
</li>
<li>
<p>Raum1.Heizkraft (real, Ausgang)</p>
</li>
<li>
<p>Raum2.Betriebstemperatur (real, Eingang)</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Die automatische Verbindung erstellt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Slave1.Raum1.Temperatur  &#8594; Slave2.Raum1.Temperatur</p>
</li>
<li>
<p>Slave1.Raum1.Heizkraft &#8594; Slave2.Raum1.Heizkraft</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Die dritte Verbindung wird nicht hergestellt, da <em>Raum1.Betriebstemperatur</em> nicht zu <em>Raum2.Betriebstemperatur</em> passt.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_eine_verbindung_mit_einer_umwandlungstätigkeit_beauftragen">2.4.2. Eine Verbindung mit einer Umwandlungstätigkeit beauftragen</h4>
<div class="paragraph">
<p>Falls Sie die Umwandlung einer Einheit oder andere Änderungen (Zeichenumkehrung, Skalierung) zwischen Ausgangs- und Eingangsvariablen vornehmen wollen, können Sie in der dritten Spalte der Tabelle <strong>(6)</strong> <strong>doppelklicken</strong>, um einen Dialog für das Editieren der Umwandlungsfaktoren und Versätze zu öffnen. Siehe Abschnitt <a href="#_Verbindungsgrafik_">Verbindungsgrafik</a> für eine detaillierte Beschreibung.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_die_ansicht_der_simulationseinstellungen">2.5. Die Ansicht der Simulationseinstellungen</h3>
<div class="paragraph">
<p>Alle Einstellungen, die die gegenwärtigen Co-Simulations-Algorithmen kontrollieren, werden hier festgelegt. Eine detaillierte Beschreibung der Einstellungen und ihrer Anwendung findet man im Abschnitt <a href="#_Master_Algorithmus">Master-Algorithmus</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Abschnitt <a href="#_simulator_settings">Project file reference - Simulator settings</a> beschreibt die zugehörigen Eintragungen in der <em>MasterSim</em>-Projekt-Datei.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gui_simulation_settings_view.png" alt="Simulation view">
</div>
<div class="title">Figure 9. Simulationseinstellungen und die Startansicht der Simulation</div>
</div>
<div class="paragraph">
<p>TODO: Korr.Orig. s.u. adjustment; convergence</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
(1)
</td>
<td class="hdlist2">
<p>Hier können sie den Start- und Endzeitpunkt ihrer Simulation festlegen.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(2)
</td>
<td class="hdlist2">
<p>Die anfängliche Intervallgröße der Datenübertragung. Wenn die Zeitschritt-Anpassung <strong>(7)</strong> deaktiviert ist, wird diese Intervallgröße der Datenübertragung genutzt, bis das Ende der Simulationszeit erreicht wurde.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(3)
</td>
<td class="hdlist2">
<p>Auswahl des Master-Algorithmus</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(4)
</td>
<td class="hdlist2">
<p>Maximale Anzahl an Wiederholungen, 1 deaktivierte Wiederholung.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(5)
</td>
<td class="hdlist2">
<p>Die relativen und absoluten Toleranzen werden für einen Verbindungstest wiederholender Algorithmen und, wenn freigegeben, für eine lokale Fehlerprüfung und die Zeitschritt-Anpassung genutzt.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(6)
</td>
<td class="hdlist2">
<p>Hier können Sie eine Fehlerkontroll-Methode auswählen, siehe Abschnitt <a href="#_Fehlerkontrolle_und_Zeitschrittregulierung">Fehlerkontrolle und Zeitschrittregulierung</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(7)
</td>
<td class="hdlist2">
<p>Wenn getestet, wird <em>MasterSim</em> den Zeitschritt anpassen, dies verlangt FMUs, um die Fähigkeit  <strong>canHandleVariableCommunicationStepSize</strong> zu unterstützen.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(8)
</td>
<td class="hdlist2">
<p>Diese drei Parameter kontrollieren, wie der Zeitschritt im Fall einer Anpassung/Scheitern des Fehlertests angepasst wird.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(9)
</td>
<td class="hdlist2">
<p>Wenn getestet, wird <em>MasterSim</em> die Schrittgröße an das letzte Intervall so anpassen, dass es den Endzeitpunkt der Simulation als Ende des letzten Intervalls der Datenübertragung <em>exakt</em> wiedergibt, ohne Rücksicht auf das Kennzeichen <strong>(7)</strong> (siehe Diskussion in Abschnitt <a href="#_time_step_adjustment">Time step adjustment</a>).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(10)
</td>
<td class="hdlist2">
<p>Legt das minimale Intervall fest, dass durchlaufen werden muss, bevor ein neuer Ausgang geschrieben wird. Es hilft, die Anzahl an Ausgängen im Falle variabler Zeitschritte zu reduzieren, wenn diese Zeitschritte viel kleiner als ein aussagekräftiges Ausgangsraster werden können.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(11)
</td>
<td class="hdlist2">
<p>Wenn getestet, schreibt <em>MasterSim</em> auch die Werte innerbetrieblicher Variablen zu den Ausgangs-Dateien, ansonsten nur die Variablen von Kausalitäts-<em>Ausgängen</em>. Hauptsächlich nützlich für das Entpacken/die FMU-Analyse, oder um interne Werte zu erhalten, die nicht von der FMU selbst für Ausgangs-Dateien geschrieben  worden.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(12)
</td>
<td class="hdlist2">
<p>Lässt Sie das Level an Vielfältigkeit der Lösungsausgaben des Bedienfeldes kontrollieren (siehe <a href="#_Befehlszeilen-Argumente_">Befehlszeilen-Argumente</a>).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(13)
</td>
<td class="hdlist2">
<p>Befehlszeile, die genutzt wird, den Simulator zu betreiben. Kann für die automatische Verarbeitung in ein Shell-Skript oder eine Batch-Datei kopiert werden.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
(14)
</td>
<td class="hdlist2">
<p>Der große, dicke Start-Button. <strong>Ready, Steady, Go!</strong></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Wenn Sie die Simulation starten, wird ein Konsolenfenster mit einer Fortschritts-/Warnungs-/Fehlermeldung für die laufende Simulation auftauchen. Da einige Simulationen sehr schnell sein können, zeigt sich nach ungefähr 2 Sekunden das Protokollfenster mit dem gegenwärtigen Inhalt des Bildschirmprotokolls.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Beachten Sie, dass die Simulation vielleicht noch im Hintergrund laufen könnte, selbst wenn das Protokollfenster bereits gezeigt wurde. Wenn Sie die Simulation mehrere Male starten, bringen Sie mehrere Simulationsprozesse parallel hervor. Das wäre nur dann eine Verschwendung, wenn die Simulation ins selbe Verzeichnis schreiben und jede andere Datei überschreiben würde.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_einstellungs_dialog">2.6. Einstellungs-Dialog</h3>
<div class="paragraph">
<p>Der Einstellungs-Dialog, geöffnet im Hauptmenü oder durch die Anwendung des Tastatur-Kürzels, bietet derzeit Konfigurationsoptionen für den Texteditor (wird genutzt, um die Projekt-Datei mittels Kürzel <strong>F2</strong> zu editieren) und das ausführbare Nachbearbeitungsprogramm an.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gui_preferences_tools.png" alt="Preferences dialog">
</div>
<div class="title">Figure 10. Einstellungsdialog mit Eingangsoptionen für den Texteditor und das ausführbare Nachbearbeitungsprogramm</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Wenn Sie eine Textdatei im externen Texteditor bearbeiten und die Datei speichern, bringen Sie das nächste Mal die <em>MasterSim</em>-Benutzeroberfläche in den Fokus. Sie wird anregen, das modifizierte Projekt neu zu laden.
</td>
</tr>
</table>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mastersimulator_das_befehlszeilen_programm">3. <em>MasterSimulator</em> - Das Befehlszeilen-Programm</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Die gegenwärtige Simulation wird mit dem Befehlszeilen-Programm von <code>MasterSimulator</code> ausgeführt. Es wird grundsätzlich in folgenden Schritten ausgeführt:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Es liest die msim-Projektdatei (die Netzwerkdarstellung wird ignoriert, da sie nur visuelle Informationen enthält).</p>
</li>
<li>
<p>Danach wird ein Arbeitsverzeichnis für den Simulations-Testfall erzeugt (der Pfad kann angepasst werden, siehe: <code>--working-dir</code>-Befehlzeilen-Option unten).</p>
</li>
<li>
<p>Die FUMs werden extrahiert (dies kann übersprungen werden, wenn es fertig extrahiert ist, siehe Befehlszeilen-Option <code>--skip-unzip</code> unten)</p>
</li>
<li>
<p>Die Simulation läuft, wie in der Projekt-Datei festgelegt, ab</p>
</li>
</ol>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Benutzen von <em>MasterSim</em> in einer verschriftlichten Umgebung</div>
<div class="paragraph">
<p>Da die <em>MasterSim</em>-Projekt-Datei ein einfacher Text ist und der Auflöser durch die Befehlszeile gestartet werden kann, ist es möglich, <em>MasterSim</em> in einer verschriftlichten Umgebung und in automatisierten Prozessen zu nutzen (z. B. für optimierte Berechnungen).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_befehlszeilenargumente">3.1. Befehlszeilenargumente</h3>
<div class="paragraph">
<p>Allgemeine Syntax für das MasterSimulator-Befehlszeilen-Werkzeug:</p>
</div>
<div class="paragraph">
<p>TODO: Korrektur Original: main page?</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Syntax: MasterSimulator [flags] [options] &lt;project file&gt;

Markierungen:
  --help            Druckt die Hilfsseite.
  --man-page        Druckt die Hauptseite (Quellversion) des stündlichen Ausgangs.
  --cmd-line        Druckt die Befehlszeile wie sie vom Befehlszeilen-Syntaxanalysierer verstanden wurde.
  --options-left    Druckt alle Optionen, die dem Befehszeilen-Syntaxanalysierer unbekannt sind.
  -v, --version     Zeigt die Versionsinformation.
  -x, --close-on-exit  Schließt das Konsolenfenster nach dem Beenden der Simulation.
  -t, --test-init   Startet die Initialisierung und stoppt sie direkt danach.
  --skip-unzip      Entpackt nicht die FMUs und erwartet sie nicht entpackt im Extraktionsverzeichnis.

Optionen:
  --verbosity-level=&lt;0..4&gt;
                    Level für Ausgangsdetails (0-4).
  --working-dir=&lt;working-directory&gt;
                    Arbeitsverzeichnis für den Master.</pre>
</div>
</div>
<div class="sect3">
<h4 id="_arbeits_und_ausgangsverzeichnis">3.1.1. Arbeits- und Ausgangsverzeichnis</h4>
<div class="paragraph">
<p>Wenn kein Arbeitsverzeichnis vorgegeben wird, wird der Verzeichnis-Pfad vom Projektdatei-Pfad erzeugt mit beseitigten Erweiterungen. Zum Beispiel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c"># Pfad zur Projektdatei</span>
/simulations/myScenario.msim

<span class="c"># Ausgänge werden hier vermerkt</span>
/simulations/myScenario/...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Im Bereich <a href="#Struktur_und_Inhalt_des_Arbeitsverzeichnis">Struktur und Inhalt des Inhaltsverzeichnis</a> wird der Inhalt des Arbeitsverzeichnisses erklärt.</p>
</div>
<div class="paragraph">
<p>TODO: sinnvolle Übersetzung für verbosity</p>
</div>
</div>
<div class="sect3">
<h4 id="_wortarten_der_konsole_und_des_protokolldatei_ausgangs">3.1.2. Wortarten der Konsole und des Protokolldatei-Ausgangs</h4>
<div class="paragraph">
<p>MasterSimulator schreibt Fortschrittsinformationen/Warnungen und Fehlermeldungen in das Konsolenfenster und in die Datei <code>&lt;working-dir&gt;/logs/screenlog.txt</code>. Die Menge an geschriebenem Text und die Detailgenauigkeit wird durch den <code>--verbosity-level</code>-Parameter kontrolliert, welcher die Menge der durch den Master erzeugten Fehlinformationen einschränkt.</p>
</div>
<div class="paragraph">
<p>Das Niveau der verbosity auf 0 ermöglicht so ziemlich jede Ausgabe, das verbosity-Niveau auf 1 ist der Standard mit einem normalen Fortschrittsnachrichtenausgang. Nutzen Sie ein höheres verbosity-Level, wenn das Ziel die Fehlersuche ist, oder um Fehler einzugrenzen.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Die verbosity der Protokolldatei ist während der Initialisierung immer auf 3 gesetzt und während der Simulation zurückgesetzt auf den Standardwert 1 oder den Befehlszeilenwert (um eine Verlangsamung der Simulation aufgrund des exzessiven Ausgabeschreibens zu vermeiden).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_spezielle_optionen_bei_windows">3.1.3. Spezielle Optionen bei Windows</h4>
<div class="paragraph">
<p>Normalerweise bleibt das Konsolenfenster (bei Windows) am Ende der Simulation offen, sofern nicht die <code>-x</code>-Befehlszeilen-Markierung angegeben wurde.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_struktur_und_inhalt_des_arbeitsverzeichnis">3.2. Struktur und Inhalt des Arbeitsverzeichnis</h3>
<div class="paragraph">
<p>Im Standard wird die folgende Verzeichnisstruktur genutzt. Angenommen es gibt eine Projekt-Datei <code>simProject.msim</code>, die für die Beschreibung des Simulationsszenario 2 bereitgestellte FMUs <code>part1.fmu</code> und <code>part2.fmu</code> nutzt, welche innerhalb des Projekts jeweils als Simulations-Slaves <strong>P1</strong> und <strong>P2</strong> Bezug nehmen. Nehmen wir an, diese Dateien sind in einem Unterverzeichnis verortet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/sim_projects/pro1/simProject.msim
/sim_projects/pro1/fmus/part1.fmu
/sim_projects/pro1/fmus/part2.fmu</pre>
</div>
</div>
<div class="paragraph">
<p>Während des Betriebs des Master-Simulators wird ein Arbeitsverzeichnis erstellt. Standardmäßig entspricht der Dateipfad zu diesem Arbeitsverzeichnis dem Projekt-Dateinamen ohne weitere Anhänge.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/sim_projects/pro1/simProject/             - working directory
/sim_projects/pro1/simProject/log/         - log and statistic files
/sim_projects/pro1/simProject/fmus/        - unzipped fmu subdirectories
/sim_projects/pro1/simProject/fmus/part1   - unzipped part1.fmu
/sim_projects/pro1/simProject/fmus/part2   - unzipped part2.fmu
/sim_projects/pro1/simProject/slaves/      - output/working directory for fmu slaves
/sim_projects/pro1/simProject/slaves/P1    - output directory for slave P1
/sim_projects/pro1/simProject/slaves/P2    - output directory for slave P2
/sim_projects/pro1/simProject/results/     - base directory for simulation results</pre>
</div>
</div>
<div class="paragraph">
<p>Der Basisname des Verzeichnis, hier <code>simProject</code> kann geändert werden, indem das Befehlszeilenargument <code>--working-directory</code> genutzt wird.</p>
</div>
<div class="sect3">
<h4 id="_verzeichnis_log">3.2.1. Verzeichnis <code>log</code></h4>
<div class="paragraph">
<p>TODO: verbosity level?</p>
</div>
<div class="paragraph">
<p>Dieses Verzeichnis beinhaltet 3 Dateien:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>progress.txt</code></dt>
<dd>
<p>beinhaltet den gesamten Simulations-Fortschritt</p>
</dd>
<dt class="hdlist1"><code>screenlog.txt</code></dt>
<dd>
<p>beinhaltet die Ausgabe von <em>MasterSim</em>, geschrieben im Konsolenfenster mit dem erforderlichen Umfang an Worten (während der Initialisierung wird immer eine detaillierte Ausgabe an die Log-Datei geschrieben, selbst wenn auf dem Bildschirm nichts zu schreiben notwendig ist bei einer geringen Wortanzahl)</p>
</dd>
<dt class="hdlist1"><code>summary.txt</code></dt>
<dd>
<p>nachdem die Simulation <em>erfolgreich</em> vollendet ist, beinhaltet diese Datei eine Zusammenfassung der relevanten Lösungs- und Algorithmusstatistiken.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Das Format des <code>progress.txt</code> ist recht simpel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>   Simtime [s] 	   Realtime [s]	 Percentage [%]
            600	       0.000205	         0.0019
           1200	        0.00023	         0.0038
           1800	       0.000251	         0.0057
           2400	       0.000271	         0.0076
            ...             ...             ...</pre>
</div>
</div>
<div class="paragraph">
<p>TODO: Korrektur Original (s.u.): Tab groß?</p>
</div>
<div class="paragraph">
<p>Die Datei besitzt 3 Spalten, getrennt durch ein Tabulatorzeichen. Die Datei wird bei laufender Simulation geschrieben und aktualisiert und kann von anderen Werkzeugen genutzt werden, um den Gesamtfortschritt aufzugreifen und Fortschrittsdiagramme zu erzeugen. (Geschwindigkeit/Prozentsatz etc.)</p>
</div>
<div class="paragraph">
<p>Die Bedeutung der verschiedenen Werte im <code>summary.txt</code> werden im Abschnitt erklärt.</p>
</div>
<div class="paragraph">
<p>TODO: Original s.o.: welcher Abschnitt?</p>
</div>
</div>
<div class="sect3">
<h4 id="_verzeichnis_fmus">3.2.2. Verzeichnis <code>fmus</code></h4>
<div class="paragraph">
<p>Innerhalb dieses Verzeichnisses werden die importierten FMUs extrahiert, jedes in ein Unterverzeichnis mit dem Basisnamen des FMU (<code>part1.fmu</code> &#8594; <code>part1</code>).</p>
</div>
<div class="paragraph">
<p>Wenn ein <em>MasterSim</em>-Projekt auf verschiedene FMUs desselben Basisnamen Bezug nimmt, welche zum Beispiel in verschiedenen Unterverzeichnissen stehen, wird es den Pfadnamen anpassen. Beispiel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">slave1</span> <span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">fmus</span><span class="o">/</span><span class="n">s1</span><span class="o">.</span><span class="n">fmu</span>
<span class="n">slave2</span> <span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">fmus</span><span class="o">/</span><span class="n">s1</span><span class="o">.</span><span class="n">fmu</span>                <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">slave3</span> <span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">other</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">fmus</span><span class="o">/</span><span class="n">s1</span><span class="o">.</span><span class="n">fmu</span>     <i class="conum" data-value="2"></i><b>(2)</b>

<span class="c1"># _MasterSim_ erzeugt Verzeichnisse
</span><span class="o">.../</span><span class="n">fmus</span><span class="o">/</span><span class="n">s1</span>
<span class="o">.../</span><span class="n">fmus</span><span class="o">/</span><span class="n">s1_2</span>                                <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>zweite Realisierung des gleichen FMU</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>anderes FMU mit gleichem Basisnamen</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Anhang 2 und 3 ist durch <em>MasterSim</em> zugefügt</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Grundsätzlich wird jede FMU-Datei nur einmal ausgewählt.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<div class="title">Überspringen des FMU-Extraktions-Schritts</div>
<p>MasterSim unterstützt die Befehlszeilen-Option <code>--skip-unzip</code>, welche sehr nützlich ist, um fehlerhafte FMUs im <code>modelDescription.xml</code> oder fehlende Ressourcen zu reparieren. Wenn solch ein FMU auftaucht, können Sie MasterSimulater einmal durchlaufen lassen, um die FMUs ins Verzeichnis zu extrahieren, dann die schlechten Dateien im jeweiligen extrahierten Verzeichnis überarbeiten/anpassen und danach die Simulation noch einmal mit <code>--skip-unzip</code> durchlaufen lassen. <em>MasterSim</em> wird nun die (veränderten) Dateien direkt lesen und Sie können sich selbst die Mühe des Komprimierens und Umbenennens der FMUs sparen. Ebenso können Sie die <code>modelDescription.xml</code> im Editor geöffnet lassen und durch die Editions- und Test-Lauf-Prozedur schnell wiederholen, bis alles funktioniert.</p>
</div>
<div class="paragraph">
<p>Siehe außerdem Abschnitt <a href="#_ModifikationFixierung_des_FMU_Inhalts">Modifikation/Fixierung des FMU-Inhalts</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_verzeichnis_slaves">3.2.3. Verzeichnis <code>Slaves</code></h4>
<div class="paragraph">
<p>Oft schreiben nicht-triviale Simulations-Slaves ihre eigenen Ausgabe-Dateien, anstatt die gesamten Ausgabedaten per FMI-Ausgabevariablen zum Master zu verschieben. In Fällen in denen PDEs gelöst werden und tausende Variablen erzeugt werden, könnte dies tatsächlich nicht möglich sein.</p>
</div>
<div class="paragraph">
<p>Da ein Slave-FMU mehrere Male realisiert werden kann, ist die feste Programmierung eines Ausgabepfads innerhalb des FMU im Allgemeinen keine gute Idee (obgleich gegenwärtig noch immer Praxis). Ausgaben ins gegenwärtige Arbeitsverzeichnis zu schreiben ist ebenso ungeschickt, da das Arbeitsverzeichnis zwischen den Aufrufen der FMUs eventuell durch den Master geändert werden muss - und dies wird am besten vermieden.</p>
</div>
<div class="paragraph">
<p>Leider unterstützt der FMU-Standard keine Option, ein solches offizielles Ergebnis-Verzeichnis festzulegen. <em>MasterSim</em> löst dies, indem es Slave-spezifische Verzeichnispfade in einem Reihenparameter, genannt <code>ResultsRootDir</code>, einführt, falls das FMU einen solchen Parameter angibt. Wenn keine Wertemenge in der Projekt-Datei für diesen Parameter festgelegt ist, wird <em>MasterSim</em> den für den Slave erzeugten Pfad im Arbeitsverzeichnis fixieren. Das FMU kann auf den von <em>MasterSim</em> kreierten Pfad gestützt und beschreibbar sein.
Natürlich, wie bei jedem Parameter, können Sie manuell einen Wert für diesen Parameter setzen.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rückkehr_codes_des_mastersimulator_programms">3.3. Rückkehr-Codes des <em>MasterSimulator</em> -Programms</h3>
<div class="paragraph">
<p><em>MasterSimulator</em> setzt zurück:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
0
</td>
<td class="hdlist2">
<p>auf Erfolg</p>
</td>
</tr>
<tr>
<td class="hdlist1">
1
</td>
<td class="hdlist2">
<p>auf Fehler (alles von schlechten oder fehlenden FMUs, oder Fehlern während der Berechnung,&#8230;&#8203;),  <code>screenlog.txt</code> wird Details beinhalten.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_simulationsausgabe">3.4. Simulationsausgabe</h3>
<div class="sect3">
<h4 id="_slave_ausgabewerte">3.4.1. Slave-Ausgabewerte</h4>
<div class="paragraph">
<p><em>MasterSim</em> kreiert zwei Ergebnisdateien innerhalb des <code>results</code>-Unterverzeichnis.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>values.csv</code></dt>
<dd>
<p>Anzahl-Ausgabe aller Ausgabevariablen von allen Slaves (egal, ob sie verbunden sind oder nicht).</p>
</dd>
<dt class="hdlist1"><code>strings.csv</code></dt>
<dd>
<p>Werte aller Ausgabevariablen der Typenreihen aller Slaves.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>TODO: Korrektur im Original s.u.: Wo beginnt der folgende Satz?</p>
</div>
<div class="paragraph">
<p>und hängt davon ab, ob <em>synonyme Variablen</em> in der ModelDescription (siehe unten) definiert sind, die Datei <code>synonymous_variables.txt</code>.</p>
</div>
<div class="paragraph">
<p>TODO: "type" lieber generell mit Modell übersetzen?
Korrektur Original s.u. 2 mal "generates" klingt nicht gut</p>
</div>
<div class="paragraph">
<p>Reihen-Ausgabe-Dateien werden nur erzeugt, wenn die Ausgabe dieser Typen erstellt wird. CSV-Dateien nutzen Tabulatorzeichen als Trennzeichen. In der ersten Spalte steht immer der Zeitpunkt, der Spaltenkopf gibt die Zeiteinheit an.</p>
</div>
<div class="paragraph">
<p>Beispiel <code>values.csv</code>-Datei:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Time [s] 	slave1.h [-] 	slave1.v [-]
0	1	0
0.001	0.999995099905	-0.0098100000000001
0.0019999999999999	0.99998038981	-0.019619999999999
0.0030000000000001	0.999955869715	-0.029430000000002
0.0040000000000002	0.99992153962	-0.039240000000001</pre>
</div>
</div>
<div class="paragraph">
<p>Das Dateiformat entspricht denen der csv-Dateien, die als Datei-lese-Slaves genutzt werden, siehe Abschnitt <a href="#_csv_filereader_slaves">CSV-FileReader-Slaves</a>, mit:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>durch Tabulatoren getrennte Spalten,</p>
</li>
<li>
<p>Nummern sind im englischen Nummernformat geschrieben, und</p>
</li>
<li>
<p>eine einzelne Überschrift bestimmt die Variablen.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Den FMI- Variablennamen sind die entsprechenden Slave-Namen vorangestellt. Die Einheiten sind in Klammern angegeben und für einheitslose ganzzahlige und boolesche Datentypen, wird die Einheit [-] genutzt.</p>
</div>
<div class="sect4">
<h5 id="_synonyme_variablen">Synonyme Variablen</h5>
<div class="paragraph">
<p>Einige  FMUs (d.h. solche, die von Modelica Modellen erstellt wurden) können verschiedene (interne) Variblen aufweisen, welche den selben Referenzwert teilen. Das passiert, wenn die symbolische Analyse des Modelica Modells diese Variablen als die selben erkennen konnte. In diesem Fall, schreibt MasterSim keine duplizierte Ausgabevariable (dies wäre eine Verschwendung von Festplattenkapazitäten und Simulationszeit, siehe Ticket #47), sondern erstellt eine Datei <code>synonymous_variables.txt</code> mit einer Tabelle synonymer Variablen.</p>
</div>
<div class="paragraph">
<p>TODO: Korr.Orig. s.u.: Warum hier "fmu" klein, sonst immer in großen Lettern</p>
</div>
<div class="paragraph">
<p>Die Tabelle wird als einfache Textdatei geschrieben mit durch Tabs getrennte Spalten:
1. fmu-Dateiname (gegenwärtig wird nur der Dateiname geschrieben - im Fall, dass der <em>gleiche Dateiname</em> mit <em>unterschiedlichen Dateipfaden</em> genutzt wird, muss dies geändert werden)
2. der Name der Variablen, erscheint in der <code>values.csv</code>-Datei
3. die synonyme Variable, die nicht in die Ausgabedatei geschrieben wird, da es ohnehin den gleichen Wert hat.
Ein Beispiel für eine <code>synonymous_variables.txt</code>-Datei:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ControlledTemperature.fmu	heatCapacitor.T	heatCapacitor.port.T
ControlledTemperature.fmu	heatCapacitor.T	heatingResistor.T_heatPort
ControlledTemperature.fmu	heatCapacitor.T	heatingResistor.heatPort.T
ControlledTemperature.fmu	heatCapacitor.T	temperatureSensor.port.T
ControlledTemperature.fmu	heatCapacitor.T	thermalConductor.port_a.T
ControlledTemperature.fmu	heatingResistor.p.v	heatingResistor.v
ControlledTemperature.fmu	heatingResistor.p.v	idealSwitch.n.v
ControlledTemperature.fmu	constantVoltage.i	constantVoltage.n.i
ControlledTemperature.fmu	constantVoltage.i	constantVoltage.p.i
ControlledTemperature.fmu	constantVoltage.i	heatingResistor.i
ControlledTemperature.fmu	constantVoltage.i	heatingResistor.n.i
ControlledTemperature.fmu	constantVoltage.i	heatingResistor.p.i
ControlledTemperature.fmu	constantVoltage.i	idealSwitch.i
ControlledTemperature.fmu	constantVoltage.i	idealSwitch.n.i
ControlledTemperature.fmu	constantVoltage.i	idealSwitch.p.i
ControlledTemperature.fmu	heatingResistor.LossPower	heatingResistor.heatPort.Q_flow
ControlledTemperature.fmu	fixedTemperature.port.Q_flow	thermalConductor.Q_flow
ControlledTemperature.fmu	fixedTemperature.port.Q_flow	thermalConductor.port_a.Q_flow
ControlledTemperature.fmu	fixedTemperature.port.Q_flow	thermalConductor.port_b.Q_flow
ControlledTemperature.fmu	onOffController.reference	ramp.y
ControlledTemperature.fmu	onOffController.u	temperatureSensor.T
ControlledTemperature.fmu	idealSwitch.control	logicalNot.y
ControlledTemperature.fmu	logicalNot.u	onOffController.y</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_finale_statistikzusammenfassung">3.4.2. Finale Statistik/Zusammenfassung</h4>
<div class="paragraph">
<p><em>MasterSim</em> beinhaltet interne Profilierungsfunktionen, welche die Evaluierungszeiten der verschiedenen Teile der Software überwachen. Ebenso werden Ausführungsgrafen für unterschiedliche entscheidende Funktionen gezeigt.
Die Statistik wird ins Konsolenfenster kopiert (für das Wortartlevel &gt; 0) und in der Log-Datei <code>screenlog.txt</code> im folgenden Format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Solver-Statistiken
------------------------------------------------------------------------------
Wanduhrzeit                            =   78.044 ms
------------------------------------------------------------------------------
Ausgabenschreibung                             =   76.767 ms
Master-Algorithmus                           =    0.666 ms         324
Annäherungsfehler                       =                      41
Annäherung an überschrittene Wiederholungsobergrenze =                      41
Fehlermesszeit und gezählte Fehler          =    0.214 ms          85
------------------------------------------------------------------------------
Teil1                               doStep =    0.101 ms        1229
                                  getState =    0.070 ms        1116
                                  setState =    0.020 ms         509
Teil2                               doStep =    0.079 ms        1496
                                  getState =    0.039 ms        1116
                                  setState =    0.024 ms         776
Teil3                               doStep =    0.071 ms        1496
                                  getState =    0.038 ms        1116
                                  setState =    0.040 ms         776
------------------------------------------------------------------------------</pre>
</div>
</div>
<div class="paragraph">
<p>Ebenso wird dieselbe statistische Information in die <code>summary.txt</code>-Logsdatei kopiert, in ein eher <em>maschinenfreundliches</em> Format (mit Zeitangaben immer in <strong>Sekunden</strong>):</p>
</div>
<div class="paragraph">
<p>TODO: Übersetzten oder lieber nicht, da es im Programm selbst auch so angezeigt werden wird?</p>
</div>
<div class="listingblock">
<div class="content">
<pre>WallClockTime=0.078044
FrameworkTimeWriteOutputs=0.076767
MasterAlgorithmSteps=324
MasterAlgorithmTime=0.000666
ConvergenceFails=41
ConvergenceIterLimitExceeded=41
ErrorTestFails=85
ErrorTestTime=0.000214
Slave[1]Time=0.000191
Slave[2]Time=0.000142
Slave[3]Time=0.000149</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Wall clock time</dt>
<dd>
<p>gesamte Simulationszeit, die nach der Initialisierung aufgebracht wurde. Die Dauer für Entpacken und Laden der geteilten Bibliothek wird nicht einbezogen (<code>WallClockTime</code>)</p>
</dd>
<dt class="hdlist1">Output writing</dt>
<dd>
<p>Zeit, die für das Schreiben von Ausgabedateien und das Berechnen damit zusammnenhängender Werte gebraucht wurde. (<code>FrameworkTimeWriteOutputs</code>)</p>
</dd>
<dt class="hdlist1">Master-Algorithm</dt>
<dd>
<p>Zeit, die für den eigentlichen Master-Algorithmus (<code>MasterAlgorithmTime</code>) und die Anzahl der Aufrufe des Algorithmus und die gesamten genutzten Zeitschritte aufgewendet wurde. (<code>MasterAlgorithmSteps</code>)</p>
</dd>
<dt class="hdlist1">Convergence failures</dt>
<dd>
<p>Anzahl der Zeiten, die ein wiederholender Master-Algorithmus scheitert, sich innerhalb der erlaubten Anzahl an Wiederholungen anzunähern oder abweicht. Dies gilt einzig für sich wiederholende Master-Algorithmen. (<code>ConvergenceFails</code>)</p>
</dd>
<dt class="hdlist1">Convergence iteration limit exceeded</dt>
<dd>
<p>Zeiten, die ein sich wiederholender Master-Algorithmus scheitert, sich innerhalb der erlaubten Anzahl an Wiederholungen anzunähern (sie sollte weniger oder gleich der Anzahl der Annäherungsfehler sein). Dies gilt einzig für sich wiederholende Master-Algorithmen. (<code>ConvergenceIterLimitExceeded</code>)</p>
</dd>
<dt class="hdlist1">Error test time and failure count</dt>
<dd>
<p>Anzahl der Zeit, in der der Fehlertext scheitert (<code>ErrorTestFails</code>) und die insgesamt genutzte Zeit, um die Fehlertests durchzuführen, inklusive der Zeit, um den FMU-Status zurückzusetzen und für Schritte der Neubewertung. (<code>ErrorTestTime</code>). Dies gilt nur für Master-Algorithmen mit aktivierter Fehlerkontrolle (Richardson-Varianten).</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Die übrigen Linien zeigen Zeiten und Zählungen individuell für jeden Slave. Diese Linien zeigen die genutzte Zeit in den Funktionsaufrufen bis <code>doStep()</code>, <code>getState()</code> und <code>setState()</code> für diesen Slave und die jeweilige Aufrufzählung. Die den Status betreffenden Funktionen werden nur für sich wiederholende Master-Algorithmen genutzt, wenn die FMUs FMI-2.0-Merkmale unterstützen. Bedenken Sie, dass diese Funktionen sowohl vom Master-Algorithmus als auch vom Fehlertest aufgerufen werden (wenn möglich).</p>
</div>
<div class="paragraph">
<p><strong>Ausgabe-Scheiben</strong> und <strong>Master-Algorithmus</strong> sind die beiden Hauptkomponenten des MasterSimulator-Pogramms, sodass ihre addierten Zeiten nahe der Wanduhrzeit liegen sollten.</p>
</div>
<div class="paragraph">
<p>Die dritte Spalte in der Bildschirm-Datei-Statistik beinhaltet Zähler. Der Zähler für den Master-Algorithmus ist die Anzahl der Zeit, in welcher der Master-Algorithmus einen Schritt macht. Damit ist dies die gesamte Zählung der Schritte. Neuversuche und Wiederholungen <em>innerhalb</em> des Master-Algorithmus werden hier nicht beachtet.</p>
</div>
<div class="paragraph">
<p>Der letzte Abschnitt der Statistik listet Zeiten und Zähler für individuelle FMU-Slaves und die meisten relevanten Funktionen.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Sie sollten diese Profilierungswerte nutzen, um die Simulation abzustimmen und, im Fall einer sehr langsamen Simulation, herausfiltern, welche FMUs die meiste Zeit benötigen. Ebenso helfen sie bei der Identifikation, falls eine der schnellen Funktionen (den Status zu setzen und zu erhalten) zu viel Zeit verbraucht.</p>
</div>
</td>
</tr>
</table>
</div>
<hr>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_das_format_der_projekt_datei">4. Das Format der Projekt-Datei</h2>
<div class="sectionbody">
<div class="paragraph">
<p>_MasterSim_benutzt eine einfache Projekt-Datei, welche das Simulations-Szenario beschreibt. Diese Projekt-Datei besitzt die Erweiterung <code>msim</code> und beinhaltet alle Daten, um eine Simulation durchzuführen.</p>
</div>
<div class="paragraph">
<p>Eine zweite Datei mit dem selben Namen und der Erweiterung <code>bm</code> kann am selben Ort wie die Projekt-Datei angezeigt sein. Diese beinhaltet die grafische Darstellung des Simulations-Szenarios. Da die grafische Netzwerkanzeige <em>rein optional</em> ist, kann die <code>bm</code>-Datei beliebig weggelassen/ignoriert/gelöscht werden.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<div class="title">Zukünftige Entwicklungsarbeit</div>
<p>Derzeit ist die Forschung im Modelica Association Project SSP (<a href="https://modelica.org/projects">System Structure and Parameterization of Components for Virtual System Design</a>) in vollem Gang, um einen Standard für das Darstellen eines Simulations-Szenarios festzulegen. Wenn die Spezifizierungen rechtzeitig  hinreichend abgeschlossen sind, kann der Master-Simulator diesen Datei-Standard vielleicht unterstützen, zumindest den Import und Export solcher Dateien. Tatsächlich fügt eine solche Datei die Beschreibung der räumlichen Struktur der FMU-Verbindung und ihrer (nach wie vor optionalen) grafischen Darstellung in einer Datei zusammen. Allerdings ist dieses Datei-Format, ähnlich den FMUs, eigentlich eine Zip-komprimierte Verzeichnisstruktur, wodurch SSP-Projekt-Dateien vielleicht nicht länger effektiv in Versionskontrollsystemen genutzt werden können. Hier ist das ASCII-Format der aktuellen <code>msim</code>- und <code>bm</code>-Dateien gut geeignet und nützlich.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Das Format ist ein Klartext-Format (UTF8-kodiert) mit folgendem Inhalt:</p>
</div>
<div class="listingblock">
<div class="title">Beispiel MasterSim-Projektdatei</div>
<div class="content">
<pre># Created:	Di. Aug. 14 17:02:20 2018
# LastModified:	Di. Aug. 14 17:02:20 2018

# Project file example for iterating GaussSeidel with time step adjustment
#
# No error test included, time step adjustment based on convergence failures.
tStart                   0 s
tEnd                     12 s
hMax                     30 min
hMin                     1e-06 s
hFallBackLimit           0.001 s
hStart                   1e-07 s
hOutputMin               0.12 s
adjustStepSize           no
preventOversteppingOfEndTime yes
absTol                   1e-06
relTol                   0.01
MasterMode               GAUSS_JACOBI
ErrorControlMode         NONE
maxIterations            1
writeInternalVariables   yes

simulator 0 0 Part1 #ff447cb4 "fmus/simx/Part1.fmu"
simulator 1 1 Part2 #ffc38200 "fmus/simx/Part2.fmu"
simulator 2 1 Part3 #ffff0000 "fmus/simx/Part3.fmu"

graph Part1.x2 Part2.x2
graph Part1.x1 Part2.x1
graph Part2.x3 Part3.x3
graph Part3.x4 Part2.x4

parameters Part1.para1  14.3</pre>
</div>
</div>
<div class="paragraph">
<p>Jede Zeile legt eine andere Eigenschaft fest. Die Tokens jeder Zeile sind durch Leerräume (Tabulatoren oder Leerzeichen) voneinander getrennt. Die Zeilen, die mit einem Rautenzeichen # beginnen, werden kommentiert und ignoriert.</p>
</div>
<div id="screenshot_project_properties" class="imageblock">
<div class="content">
<img src="./images/welcome_page_project_properties.png" alt="Project properties shown on the welcome page">
</div>
<div class="title">Figure 11. Auf der Startseite angezeigte Projekteigenschaften</div>
</div>
<div class="paragraph">
<p>Alle Befehlszeilen, bevor die ersten tatsächlichen Eingabezeilen als Kopfzeile erkannt werden. In diesen Zeilen wird vorausgesetzt, dass auf die Stichworte <code>Created:</code> und <code>LastModified:</code> ein mehr oder weniger bedeutungsvoller (aber nicht standardisierter) Daten- oder Zeitstrang auf der Benutzeroberfläche gezeigt wird. Andere Kopfzeilen werden als Projektbeschreibung betrachtet, welche in der Projektzusammenfassung auf der Startseite der grafischen Benutzeroberfläche gezeigt werden (siehe Figur <a href="#screenshot_project_properties">Auf der Startseite angezeigte Projekteigenschaften</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Nach der Kopfzeile mit der Beschreibung, ist die Ordnung der Einträge/Zeilen willkürlich.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_einstellungen_des_simulators">4.1. Einstellungen des Simulators</h3>
<div class="paragraph">
<p>Unten gibt es eine kurze Beschreibung der verschiedenen Parameter mit einer Formatsbeschreibung und den benötigten Werten. Für Details über ihren Gebrauch und welchen Einfluss sie haben, siehe Abschnitt <a href="#_Master_Algorithmus">Master-Algorithmus</a>.</p>
</div>
<div class="paragraph">
<p>Parameter werden als mit einer Einheit versehene Zahl angegeben, außer die Zähler (Maximum an Wiederholungen) oder Fehlergrenzen (welche sowieso ohne Einheit angegeben werden).</p>
</div>
<div class="paragraph">
<p>Optionen, die Zeitschritte betreffend:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
tStart
</td>
<td class="hdlist2">
<p>(<em>default=0 s</em>) Startzeitpunkt der Simulation</p>
</td>
</tr>
<tr>
<td class="hdlist1">
tEnd
</td>
<td class="hdlist2">
<p>(<em>default=1 a</em>) Endzeitpunkt der Simulation, muss &gt; <strong>tStart</strong></p>
</td>
</tr>
<tr>
<td class="hdlist1">
hMax
</td>
<td class="hdlist2">
<p>(<em>default=30 min</em>) maximale Zeitschritt-Größe</p>
</td>
</tr>
<tr>
<td class="hdlist1">
hMin
</td>
<td class="hdlist2">
<p>(<em>default=1e-5 s</em>) niedrigere Begrenzung des Zeitschritts im anpassungsfähigen Zeitschritt-Modus, wenn der Zeitschritt unter diese Grenze reduziert wird, stoppt der Master</p>
</td>
</tr>
<tr>
<td class="hdlist1">
hFallBackLimit
</td>
<td class="hdlist2">
<p>(<em>default=1e-3 s</em>) für einen Gauss-Seidel mit Zeitschritt-Festlegung: wenn die Zeitschritte unter diese Grenze fallen, wird der nicht wiederholende Gauss-Seidel genutzt (um diskontinuierliche Ausgänge zu kompensieren), sollte &gt; <strong>hMin</strong></p>
</td>
</tr>
<tr>
<td class="hdlist1">
hStart
</td>
<td class="hdlist2">
<p>(<em>default=10 min</em>) initialer Zeitschritt, wird als konstante Schrittgröße verwendet, wenn nicht der anpassungsfähige Zeitschritt-Modus in Gebrauch ist.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Falls <strong>hStart</strong> in der Projekt-Datei auf 0 gesetzt ist, wird berechnet, dass es 1/1000 der Simulationsdauer ist, festgelegt durch (<strong>tEnd - tStart</strong>).
</td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>TODO: Korr.Orig.s.u. minimum, disabling</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">hOutputMin</dt>
<dd>
<p>(<em>default=10 min</em>) minimale Dauer, die verstreichen muss, bevor der nächste Ausgabewert geschrieben wurde. Wenn Schrittgrößen der  Kommunikation größer als <strong>hOutputMin</strong> sind, werden die Ausgänge eventuell übersprungen, aber das reguläre Ausgabeintervall bleibt erhalten.</p>
</dd>
<dt class="hdlist1">outputTimeUnit</dt>
<dd>
<p>(<em>default=s</em>) Der Wert, der für die Zeitspalte (die erste Spalte) der Ausgangsdateien genutzt wird.</p>
</dd>
<dt class="hdlist1">adjustStepSize</dt>
<dd>
<p>(<em>default=false</em>) aktiviert/verhindert den anpassungsfähigen Zeitschritt-Modus, wenn der Fehlerkontroll-Modus <strong>ADAPT_STEP</strong> ist, eine fehlerhafte <strong>adjustStepSize</strong> ist ein Fehler.</p>
</dd>
<dt class="hdlist1">preventOversteppingOfEndTime</dt>
<dd>
<p>Diese Markierung wird für bestimmte FMUs gebraucht, welche einen Test gegen das Übersteigen der Simulationsendzeit enthalten. Dies ist in manchen Fällen mit Zeitreihen-Parameteren verbunden, die nur bis zum exakten Ende der Simulationszeit dauern. Ein anderes Problem ist, dass Rundungsfehler zu einer sehr kleinen Überschreitung des Endzeitpunktes dazu addiert werden können. Dennoch sollten gute FMUs das Überschreiten angemessen händeln. Zugleich, um einen FMU-Fehler und einen Simulationsabbruch zu vermeiden, kann <em>MasterSim</em> die letzte Kommunikationsintervall-Größe so anpassen, dass exakt die Endzeit der Simulation an das FMU übermittelt wird. Wenn diese Markierung deaktiviert ist, muss wahrscheinlich die letzte Intervallschritt-Größe eingestellt werden, selbst wenn die Zeitschritt-Anpassung generell durch die Markierung <strong>adjustStepSize</strong> gesperrt ist.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>MasterMode</strong> (<em>default=GAUSS_SEIDEL</em>) ist einer von:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
GAUSS_JACOBI
</td>
<td class="hdlist2">
<p>Gauss-Jacobi-Algorithmus (nicht wiederholend)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
GAUSS_SEIDEL
</td>
<td class="hdlist2">
<p>Gauss-Seidel-Algorithmus (wiederholend oder nicht wiederholend, abhängig von <strong>it_max_steps</strong>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
NEWTON
</td>
<td class="hdlist2">
<p>Newton-Algorithmus mit einer Annäherung des Differenz-Quotienten an die Jacobi-Matrix</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Wiederholungs- und Konvergenzparameter:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
maxIterations
</td>
<td class="hdlist2">
<p>(<em>default=1=disabled</em>) max. Anzahl an Wiederholungen, wenn == 1 wird keine Widerholung ausgeführt</p>
</td>
</tr>
<tr>
<td class="hdlist1">
absTol
</td>
<td class="hdlist2">
<p>(<em>default=1e-5</em>) absolute Toleranz für den Konvergenz-/Fehlertest</p>
</td>
</tr>
<tr>
<td class="hdlist1">
relTol
</td>
<td class="hdlist2">
<p>(<em>default=1e-6</em>) relative Toleranz für den Konvergenz-/Fehlertest</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>ErrorControlMode</strong> (<em>default=NONE=disabled</em>) ist einer von:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
NONE
</td>
<td class="hdlist2">
<p>keine Fehlerprüfung und Anpassung</p>
</td>
</tr>
<tr>
<td class="hdlist1">
CHECK
</td>
<td class="hdlist2">
<p>nur Fehlerprüfung; Protokollzeit und Größenordnung von überschreitendem Fehlerlimit. Funktioniert auch mit FMI 1 (indem die Daten der letzten beiden Schritte genutzt werden).</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Noch nicht implementiert. Nicht benutzen!
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
ADAPT_STEP
</td>
<td class="hdlist2">
<p>ermöglicht implizit den anpassungsfähigen Zeitschritt-Modus und passt Zeitschritte an, wenn das Fehlerlimit überschritten ist.</p>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_fortgeschrittene_konfigurationen">4.1.1. Fortgeschrittene Konfigurationen</h4>
<div class="paragraph">
<p>Die folgenden Konfigurationen werden zumeist für den Gebrauch mit einer Gegenproben-Prozedur verwendet.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
preventOversteppingOfEndTime
</td>
<td class="hdlist2">
<p>(<em>default=true</em>) selbst für FMUs mit konstanten Schritten, wird der letzte Schritt gekürzt, um exakt den Endzeitpunkt zu treffen (das ist für solche FMUs erforderlich, die eine strikte Endzeitüberprüfung haben).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
writeInternalVariables
</td>
<td class="hdlist2">
<p>(<em>default=false</em>) Verfasst auch Variablen mit lokaler/interner Kausalität (wen es auf <strong>no</strong> gesetzt ist, werden nur Variablen mit der Kausalität <em>Ausgang</em> verfasst)</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Abhängig von den gewählten Optionen, müssen sicherlich einige Fähigkeiten durch FMUs unterstützt werden, siehe Abschnitt <a href="#_Master_Algorithmus">Master-Algorithmus</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_simulator_slave_definitionen">4.2. Simulator-/Slave-Definitionen</h3>
<div class="paragraph">
<p>Jeder Slave wird festgelegt durch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>simulator  &lt;priority&gt; &lt;cycle&gt;  &lt;slave-name&gt; &lt;html-color-code&gt; &lt;path/to/fmu-file&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Der <strong>Zyklus</strong> zeigt an, ob Slaves zu einem Zyklus mit anderen FMUs gehören. Der <strong>Slave-Name</strong> muss eine eindeutige Identifikation des Slaves zulassen (siehe Diskussion in Abschnitt <a href="#_Master_Algorithmus">Master-Algorithmus</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Die <strong>Priorität</strong> wird genutzt, um die Anordnung der Durchführung in einem Zyklus auszuwählen (für Gauss-Seidel). Trotzdem ist diese Funktion gegenwärtig nicht implementiert und Slaves innerhalb des selben Zyklus werden in der Anordnung bewertet, in der sie festgelegt sind.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Der Slave-/Simulatorname ist eine eindeutige Identifikation des FMU-Falls.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Slave-Namen <strong>dürfen keine</strong> Leerzeichen oder Punkte enthalten. Wenn ein Slave-Name ein Leerzeichen oder einen Punkt enthält, wird der Parser der Projekt-Datei melden, dass die Definitionszeile der Simulation ungültig ist. Auch werden Slave-Namen für die Verzeichnisnamen genutzt (Zielverzeichnisse für Slave-spezifische Ausgänge). Daher müssen sie keine Zeichen beinhalten, die in Dateisystemnamen nicht erlaubt sind.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Der <strong>html-Farb-Code</strong> st eine übliche html-basierte Farbdefinition, die mit einem Rautezeichen beginnt, auf welches entweder 8 oder 6 Zeichen folgen, zum Beispiel: <code>#ff00ff00</code> oder <code>#00ff00</code> für grün. Im 8-Zeichen-Format, ist die erste Hexadezimalzahl der Alphawert (Opazität - ff = vollkommen opak, 0 = vollkommen transparent). Gegenwärtig gibt es keinen Gebrauch für diesen Wert auf der Benutzeroberfläche, sodass die 6-Zeichen-Variante die gebräuchliche Wahl ist.</p>
</div>
<div class="paragraph">
<p>Das letzte Argument in der Zeile ist der Dateipfad-Verweis zur eigentlichen FMU-Datei. Der Pfad zur FMU-Datei in Anführungszeichen angefügt werden, wenn der Pfad oder der Dateiname Leerzeichen enthält. Der Pfad kann absolut oder relativ zur <code>msim</code>-Projektdatei sein. Einige Slaves können durch die selbe FMU-Datei realisiert sein (wenn das FMU diese Funktion unterstützt). In diesem Fall nehmen einige Simulatorzeilen Bezug auf den gleichen FMU-Dateipfad.</p>
</div>
<div class="sect3">
<h4 id="_csv_filereader_slaves">4.2.1. CSV-FileReader-Slaves</h4>
<div class="paragraph">
<p>Anstatt eines FMUs können Sie ebenso auf eine Datendatei verweisen (Erweiterung mit <code>tsv</code> oder <code>csv</code>). In diesem Fall wird <em>MasterSim</em> FileReader-Slaves realisieren und die Daten in der Datei wird wie ein FMU behandelt, dass nur Ausgänge zur Verfügung stellt, aber keinen Eingang und keine Parameter hat.</p>
</div>
<div class="paragraph">
<p>Effektiv unterstützt <em>MasterSim</em> zwei Varianten von csv-Dateien. In beiden Varianten werden Zahlen immer in der <strong>englischen Nummernschreibweise</strong> verfasst. Der Datei-Parser-Pfad versucht zunächst, den durch Tabulatoren getrennten Variantenwert zu nutzen, indem die ersten beiden Zeilen mit Tabulatorzeichen aufgeteilt werden. Wenn dies mehr als zwei Spalten ergibt und die gleiche Anzahl an Spalten in beiden Linien (die Kopf- und erste Datenzeile), wird eine Tabulator-getrennte csv/tsv-Variante übernommen. Andernfalls wird der Exeltyp der angeführten csv-Variante übernommen.</p>
</div>
<div class="sect4">
<h5 id="_tabulator_getrennte_werte">Tabulator-getrennte Werte</h5>
<div class="paragraph">
<p>Das Format einer solchen Input-Datei folgt den selben Konventionen wie das Dateienformat, dass von <a href="https://bauklimatik-dresden.de/postproc">PostProc2</a> unterstützt wird.</p>
</div>
<div class="paragraph">
<p>Die Datei startet mit einer einzelnen Zeile (der Kopfzeile), dem Identifizieren von Variablen-Namen und der Einheit im Format, wie:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Time [&lt;time unit&gt;] &lt;tab&gt; &lt;var1 name&gt; [&lt;unit&gt;] &lt;tab&gt; &lt;var2 name&gt; [&lt;unit&gt;]</pre>
</div>
</div>
<div class="paragraph">
<p>wo <code>&lt;tab&gt;</code> das Tabulatorzeichen ist.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Time [d]  &lt;tab&gt;  T_lab [C]  &lt;tab&gt;  T_sample [C]  &lt;tab&gt;  RH_lab [%]</pre>
</div>
</div>
<div class="paragraph">
<p>Beispieldatei:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Time [h]     T_lab [C]     T_sample [C]     RH_lab [%]
0            20            20.2             46
0.5          20.1          20.3             43
1.0          22            25               40
3.0          19            15               65</pre>
</div>
</div>
<div class="paragraph">
<p>Die Variablennamen entsprechen der Zeichenfolge der Kopfzeile, ausgenommen der Einheiten (falls angegeben). Im Beispiel oben wird die Datei Ausgangsvariablen mit den Namen <strong>T_lab</strong>, <strong>T_sample</strong> und <strong>TH_lab</strong> anbieten.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Eine Datei mit diesem Format gilt automatisch, wenn eine Tabelle mit solchen Daten aus LibreOffice/Calc/Excel in einen einfachen Text-Editor kopiert und eingefügt wird.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_kommatrennung_mit_anführungszeichen">Kommatrennung mit Anführungszeichen</h5>
<div class="paragraph">
<p>In solchen Dateien ist das Trennungszeichen das , (Komma) und Werte werden durch Anführungszeichen angegeben. Zum Beispiel:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>"time","T_lab [C]","T_sample [C]","RH_lab [%]"
"0","20","20.2","46"
"0.5","20.1","20.3","43"
"1.0","22","25","40"</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zeitpunkte_und_zeiteinheiten">4.2.2. Zeitpunkte und Zeiteinheiten</h4>
<div class="paragraph">
<p>Die Zeitpunkte können in zufällige Intervalle aufgeteilt sein. <em>MasterSim</em> erwartet zur Zeit, dass Simulationen in Sekunden ablaufen als Basis-Zeiteinheit. Das bedeutet im Internen, dass Variablen ausgetauscht werden, um einer Simulationszeit in Sekunden zu entsprechen. Wenn eine Eingangsdatei eine andere Einheit für die Zeit festlegt, konvertiert <em>MasterSim</em> diese Zeit in Sekunden.</p>
</div>
<div class="paragraph">
<p>Die folgenden Zeiteinheiten werden von MasterSim erkannt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ms - Millisekunden</p>
</li>
<li>
<p>s - Sekunden</p>
</li>
<li>
<p>min - Minuten</p>
</li>
<li>
<p>h - Stunden</p>
</li>
<li>
<p>d - Tage</p>
</li>
<li>
<p>a - Jahre (reguläre Jahre, 365 reguläre Tage, kein Schaltjahr/-tag)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<div class="title">Die standardmäßige Zeiteinheit ist Sekunde</div>
<p>Im Falle einer fehlenden Zeiteinheit in der Kopfzeile der ersten Spalte setzt  <em>MasterSim</em> gegenwärtig die Zeiteinheit <strong>Sekunden</strong> (s) voraus.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_interpretation_der_von_den_filereader_slaves_bereitgestellten_daten">4.2.3. Interpretation der von den FileReader-Slaves bereitgestellten Daten</h4>
<div class="paragraph">
<p>TODO: Fehlt im Folgenden vielleicht etwas?</p>
</div>
<div class="paragraph">
<p>Variablen ohne gegebene Einheiten, z. B. das [&#8230;&#8203;] fehlt in der Spaltenüberschrift, werden als unbekannte/undefinierte Einheit ausgewiesen. <em>-</em>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Die von einem solchen FileReader-Slave exportierten Variablen wurden noch keinem Datentyp zugewiesen. Während der Initialisierung schaut <em>MasterSim</em> nach den Verbindungen, die mit FileReader-Slaves gemacht worden und teilt die Datentypen den auf <em>connected input variable</em> basierenden Variablen zu.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Während der Simulation, wenn der FileReader-Slave gefragt wird, einen Wert für eine Variable bereitzustellen, gelten die folgenden Regeln:</p>
</div>
<div class="sect4">
<h5 id="_boolean_integer_und_enumeration_werte"><strong>Boolean</strong>-, <strong>Integer</strong>- und <strong>Enumeration</strong>-Werte</h5>
<div class="paragraph">
<p>Für <strong>Boolean</strong>-, <strong>Integer</strong>- und <strong>Enumeration</strong>-Werte wird keine Interpolation vorgenommen. Werte werden konstant zurückgeführt, bis der Wert zur Änderung festgelegt ist. Beispiel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Zeit [s]   Wert [-]
 1         4
 3         4 <i class="conum" data-value="1"></i><b>(1)</b>
 3         7 <i class="conum" data-value="2"></i><b>(2)</b>
 6         4</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Der Wert am Ende des Intervalls endet in der Zeit 3</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Der Wert zu Beginn des Intervalls, startet mit der Zeit 3; dieser Wert sollte von t&gt;=3 genutzt werden.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Evaluation dieser Werteergebnisse:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>v(1) = 4
v(2) = 4
v(2.99999) = 4
v(3) = 7
v(4) = 7
v(5.99999) = 7
v(6) = 4</pre>
</div>
</div>
<div class="paragraph">
<p>Somit könnte die Zeile <code>3     4</code> aus der Datei weggelassen werden.</p>
</div>
</div>
<div class="sect4">
<h5 id="_reale_werte">Reale Werte</h5>
<div class="paragraph">
<p><strong>Reale</strong> Werte sind linear interpoliert. Für das Datenbeispiel oben würden reale Werte folgendermaßen bewertet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> v(1) = 4
 v(2) = 4
 v(2.99999) = 6.99999 <i class="conum" data-value="1"></i><b>(1)</b>
 v(3) = 7
 v(4) = 6 <i class="conum" data-value="2"></i><b>(2)</b>
 v(5.99999) = 4.00001
 v(6) = 4</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Wenn doppelte Zeitpunkte gefunden werden, überschreibt der zweite den ersten Wert, sodass die Zeile <code>3   4</code> ignoriert wird. Daher wird die Bewertung der Werte im Intervall 2&#8230;&#8203;3 ebenso mit linearer Interpolation durchgeführt.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Die lineare Interpolation zwischen den Werten v(3)=7 und v(6)=4 bei t=4 ergibt 6.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Wenn Sie Schrittfunktionen mit <strong>Realen</strong> Werten nachbilden möchten, nutzen Sie einfach ein sehr kurzes Wechsel-Intervall, z. B. <code>v(1) = 4; v(2.9999) = 4; v(3) = 7</code>. <em>MasterSim</em> wird nach wie vor die lineare Neigung zwischen t=2.9999 und 3 erkennen, was aber unerheblich für die Ergebnisse sein könnte.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Natürlicherweise ist die lineare Interpolation für <strong>String</strong>-Parameter nicht möglich, daher werden sie simultan zu <strong>ganzzahligen</strong> Werten behandelt.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Falls Sie einen anpassungsfähigen Schritt-Algorithmus in <em>MasterSim</em> verwenden, sollten Sie den maximalen Zeitschritt/die Länge des Datenübertragungsintervalls auf einen Wert festlegen, der kleiner als ihr kleinstes Zeitintervall in der Eingangsdatei ihres FileReader-Slaves ist. Ansonsten könnte <em>MasterSim</em> die Zeitschritte als höheren Wert festlegen und Werte/Intervalle überspringen. Hierbei würden Daten fehlen und wahrscheinlich falsche Ergebnisse erzeugt. Zum Beispiel: wenn Sie mit stündlichen Klimadaten arbeiten, wählen Sie 30 Minuten als maximale Länge für ein Datenübertragungsintervall.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_verbindungsgrafik">4.3. Verbindungsgrafik</h3>
<div class="paragraph">
<p>Die Verbindungsgrafik legt den Datenaustausch zwischen den Slaves fest. Jede grafisch dargestellte Definitionslinie legt den Datentransfer zwischen einer Eingangs- und einer Ausgangsvariable fest.</p>
</div>
<div class="paragraph">
<p>Syntax der Definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>graph &lt;outputvar&gt; &lt;inputvar&gt; [&lt;offset&gt; &lt;scale factor&gt;]</pre>
</div>
</div>
<div class="paragraph">
<p>Ausgangs- und Eingangvariablen werden aus Slave-Namen und Variablennamen zusammengesetzt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>graph &lt;slave-name&gt;.&lt;variable-name&gt; &lt;slave-name&gt;.&lt;variable-name&gt;  [&lt;offset&gt; &lt;scale factor&gt;]</pre>
</div>
</div>
<div class="paragraph">
<p>Der Offset- und Skalenfaktor legt den Umwandlungsvorgang zwischen Ausgangsvariablen und dem Wert, der für die Eingangsvariable bestimmt wurde, fest. Wenn eine solche Umwandlung einer Verbindung zugewiesen wird, müssen immer beide Werte dargestellt sein.</p>
</div>
<div class="paragraph">
<p>Die folgende Umwandlungsgleichung wird verwendet:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>input = offset + scale * output</pre>
</div>
</div>
<div class="paragraph">
<p>Falls zum Beispiel ein FMU-Slave <em>Sensor</em> eine Temperatur in Kelvin liefert und ein anderer FMU-Slave <em>Heater</em> die Temperatur in Grad Celsius angibt, können Sie die Verbindung wie folgt festlegen:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>graph  Sensor.temperature  Heater.temperature  -273.15  1</pre>
</div>
</div>
<div class="paragraph">
<p>Was resultieren wird als:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>input (in C) = -273.15 + 1 * output (in K)</pre>
</div>
</div>
<div class="paragraph">
<p>Auf ähnliche Weise können Sie das Zeichen einer Verbindung umkehren, wenn Sie zum Beispiel Hitze und Massefluss durch Röhren verbinden. Angenommen der Hitzefluss ist positiv auf einer Oberfläche festgelegt und Sie verbinden <em>SurfaceA.HeatFlow</em> und <em>SurfaceB.HeatFlow</em>, dann wird die Verbindung mit der Zeichenumkehr festgelegt als:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>graph  SurfaceA.HeatFlow  SurfaceB.HeatFlow  0  -1</pre>
</div>
</div>
<div class="sect3">
<h4 id="_fmu_parameter">4.3.1. FMU-Parameter</h4>
<div class="paragraph">
<p>Sie können die Parameter der FMUs (oder spezieller, die der individuellen FMU-Slaves/-Exemplare) festlegen, indem Sie das <code>parameter</code>-Stichwort benutzen.</p>
</div>
<div class="paragraph">
<p>Definition der Syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>parameter &lt;slave-name&gt;.&lt;variable-name&gt; &lt;value&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Für <strong>boolesche</strong> Parameter müssen Sie <code>true</code> festlegen (case-sensitive!) für <strong>true</strong> oder irgend einen anderen Wert (zum Beispiel <code>false</code>) für <strong>falsch</strong>.</p>
</div>
<div class="paragraph">
<p>Für <strong>ganzzahlige</strong> Werte müssen Sie einfach den Wert als Ziffer festlegen.</p>
</div>
<div class="paragraph">
<p>Werte für <strong>wahre</strong> Parameter werden in der Einheit erwartet, die in der <code>modelDescription.xml</code>-Datei für entsprechende Parameter festgelegt worden sind. Die Umwandlung der Einheit wird hier <strong>nicht</strong> unterstützt.</p>
</div>
<div class="paragraph">
<p>Für <strong>String</strong>-Parameter wird alles nach dem Variablennamen als String angesehen (bis zum Ende der Zeile). Beispiel:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>parameter building_model.projectFile C:\\My projects\\p2\\This tall building.project</pre>
</div>
</div>
<div class="paragraph">
<p>Leerstellen können eingefügt sein, aber die Rücktasten müssen als <code>\\</code> kodiert sein. Zeilenumbrüche werden durch <code>\n</code> kodiert wie im folgenden Beispiel:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>parameter building_model.configPara First line\n    Some more lines with indentation\nlast line.</pre>
</div>
</div>
<div class="paragraph">
<p>Es wird den String setzen:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>First line
    Some more lines with indentation
last line</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Wegen der eher leichten String-Kodierung können Sie keinen String festlegen, der mit Leerraum-Zeichen beginnt.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_blockmodell_das_dateiformat_der_netzwerkpräsentation">4.4. Blockmodell - das Dateiformat der Netzwerkpräsentation</h3>
<div class="paragraph">
<p>Die <code>bm</code>-Datei ist eine simple XML-Datei und beschreibt die grafische Gestaltung und die Visualisierung des modellierten Simulations-Szenarios.</p>
</div>
<div class="paragraph">
<p>Ein einfaches Netzwerk, wie:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/bm_network_example.png" alt="Blockmod Network Example">
</div>
<div class="title">Figure 12. Beispiel für eine einfache grafische Präsentation eines Netzwerks</div>
</div>
<div class="paragraph">
<p>Es wird in der folgenden BlockMod Netzwerk-Präsentationsdatei festgelegt:</p>
</div>
<div class="listingblock">
<div class="title">Blockmod Netzwerkpräsentationsdatei</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;BlockMod&gt;</span>
	<span class="c">&lt;!--Blocks--&gt;</span>
	<span class="nt">&lt;Blocks&gt;</span>
		<span class="nt">&lt;Block</span> <span class="na">name=</span><span class="s">"Part2"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;Position&gt;</span>224, -160<span class="nt">&lt;/Position&gt;</span>
			<span class="nt">&lt;Size&gt;</span>64, 64<span class="nt">&lt;/Size&gt;</span>
			<span class="c">&lt;!--Sockets--&gt;</span>
			<span class="nt">&lt;Sockets&gt;</span>
				<span class="nt">&lt;Socket</span> <span class="na">name=</span><span class="s">"x1"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;Position&gt;</span>0, 16<span class="nt">&lt;/Position&gt;</span>
					<span class="nt">&lt;Orientation&gt;</span>Horizontal<span class="nt">&lt;/Orientation&gt;</span>
					<span class="nt">&lt;Inlet&gt;</span>true<span class="nt">&lt;/Inlet&gt;</span>
				<span class="nt">&lt;/Socket&gt;</span>
				<span class="nt">&lt;Socket</span> <span class="na">name=</span><span class="s">"x2"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;Position&gt;</span>0, 32<span class="nt">&lt;/Position&gt;</span>
					<span class="nt">&lt;Orientation&gt;</span>Horizontal<span class="nt">&lt;/Orientation&gt;</span>
					<span class="nt">&lt;Inlet&gt;</span>true<span class="nt">&lt;/Inlet&gt;</span>
				<span class="nt">&lt;/Socket&gt;</span>
				<span class="nt">&lt;Socket</span> <span class="na">name=</span><span class="s">"x4"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;Position&gt;</span>0, 48<span class="nt">&lt;/Position&gt;</span>
					<span class="nt">&lt;Orientation&gt;</span>Horizontal<span class="nt">&lt;/Orientation&gt;</span>
					<span class="nt">&lt;Inlet&gt;</span>true<span class="nt">&lt;/Inlet&gt;</span>
				<span class="nt">&lt;/Socket&gt;</span>
				<span class="nt">&lt;Socket</span> <span class="na">name=</span><span class="s">"x3"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;Position&gt;</span>64, 16<span class="nt">&lt;/Position&gt;</span>
					<span class="nt">&lt;Orientation&gt;</span>Horizontal<span class="nt">&lt;/Orientation&gt;</span>
					<span class="nt">&lt;Inlet&gt;</span>false<span class="nt">&lt;/Inlet&gt;</span>
				<span class="nt">&lt;/Socket&gt;</span>
			<span class="nt">&lt;/Sockets&gt;</span>
		<span class="nt">&lt;/Block&gt;</span>
		<span class="nt">&lt;Block</span> <span class="na">name=</span><span class="s">"Part3"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;Position&gt;</span>352, -160<span class="nt">&lt;/Position&gt;</span>
			<span class="nt">&lt;Size&gt;</span>96, 32<span class="nt">&lt;/Size&gt;</span>
			<span class="c">&lt;!--Sockets--&gt;</span>
			<span class="nt">&lt;Sockets&gt;</span>
				<span class="nt">&lt;Socket</span> <span class="na">name=</span><span class="s">"x3"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;Position&gt;</span>0, 16<span class="nt">&lt;/Position&gt;</span>
					<span class="nt">&lt;Orientation&gt;</span>Horizontal<span class="nt">&lt;/Orientation&gt;</span>
					<span class="nt">&lt;Inlet&gt;</span>true<span class="nt">&lt;/Inlet&gt;</span>
				<span class="nt">&lt;/Socket&gt;</span>
				<span class="nt">&lt;Socket</span> <span class="na">name=</span><span class="s">"x4"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;Position&gt;</span>96, 16<span class="nt">&lt;/Position&gt;</span>
					<span class="nt">&lt;Orientation&gt;</span>Horizontal<span class="nt">&lt;/Orientation&gt;</span>
					<span class="nt">&lt;Inlet&gt;</span>false<span class="nt">&lt;/Inlet&gt;</span>
				<span class="nt">&lt;/Socket&gt;</span>
			<span class="nt">&lt;/Sockets&gt;</span>
		<span class="nt">&lt;/Block&gt;</span>
	<span class="nt">&lt;/Blocks&gt;</span>
	<span class="c">&lt;!--Connectors--&gt;</span>
	<span class="nt">&lt;Connectors&gt;</span>
		<span class="nt">&lt;Connector</span> <span class="na">name=</span><span class="s">"new connector"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;Source&gt;</span>Part2.x3<span class="nt">&lt;/Source&gt;</span>
			<span class="nt">&lt;Target&gt;</span>Part3.x3<span class="nt">&lt;/Target&gt;</span>
			<span class="c">&lt;!--Connector segments (between start and end lines)--&gt;</span>
			<span class="nt">&lt;Segments&gt;</span>
				<span class="nt">&lt;Segment&gt;</span>
					<span class="nt">&lt;Orientation&gt;</span>Horizontal<span class="nt">&lt;/Orientation&gt;</span>
					<span class="nt">&lt;Offset&gt;</span>0<span class="nt">&lt;/Offset&gt;</span>
				<span class="nt">&lt;/Segment&gt;</span>
			<span class="nt">&lt;/Segments&gt;</span>
		<span class="nt">&lt;/Connector&gt;</span>
		<span class="nt">&lt;Connector</span> <span class="na">name=</span><span class="s">"auto-named"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;Source&gt;</span>Part3.x4<span class="nt">&lt;/Source&gt;</span>
			<span class="nt">&lt;Target&gt;</span>Part2.x4<span class="nt">&lt;/Target&gt;</span>
			<span class="c">&lt;!--Connector segments (between start and end lines)--&gt;</span>
			<span class="nt">&lt;Segments&gt;</span>
				<span class="nt">&lt;Segment&gt;</span>
					<span class="nt">&lt;Orientation&gt;</span>Vertical<span class="nt">&lt;/Orientation&gt;</span>
					<span class="nt">&lt;Offset&gt;</span>80<span class="nt">&lt;/Offset&gt;</span>
				<span class="nt">&lt;/Segment&gt;</span>
				<span class="nt">&lt;Segment&gt;</span>
					<span class="nt">&lt;Orientation&gt;</span>Horizontal<span class="nt">&lt;/Orientation&gt;</span>
					<span class="nt">&lt;Offset&gt;</span>-288<span class="nt">&lt;/Offset&gt;</span>
				<span class="nt">&lt;/Segment&gt;</span>
				<span class="nt">&lt;Segment&gt;</span>
					<span class="nt">&lt;Orientation&gt;</span>Vertical<span class="nt">&lt;/Orientation&gt;</span>
					<span class="nt">&lt;Offset&gt;</span>-48<span class="nt">&lt;/Offset&gt;</span>
				<span class="nt">&lt;/Segment&gt;</span>
			<span class="nt">&lt;/Segments&gt;</span>
		<span class="nt">&lt;/Connector&gt;</span>
	<span class="nt">&lt;/Connectors&gt;</span>
<span class="nt">&lt;/BlockMod&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Das Format ist ziemlich selbsterklärend. Das erste und das letzte Segment wird automatisch festgelegt, abhängig von der Sockelposition auf dem Block und wird dadurch nicht in der Netzwerk-Präsentationsdatei gespeichert.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><a href="https://github.com/ghorwin/BlockMod">BlockMod</a> ist eine Open-Source-Bibliothek zum Modellieren solcher Netzwerke. Die Wiki-Seite des Projekts enthält mehr ausführliche Informationen über das Datenformat und die Funktionalität.</p>
</div>
</td>
</tr>
</table>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzept_zur_testfolge">5. Konzept zur Testfolge</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Die <em>MasterSim</em>-Quelle enthält ein Unterverzeichnis <code>Daten/Tests</code> mit einer Regressionstestfolge. Diese Tests werden genutzt, um zu prüfen, ob alle Algorithmen wie erwartet arbeiten und ob die Änderungen der  Code-Basis versehentlich etwas kaputtmachen.</p>
</div>
<div class="paragraph">
<p><em>MasterSim</em> durchläuft ebenso die FMU-Mehrfachprüfung. Die Dateien und Skripte, die mit diesem Test in Verbindung stehen, befinden sich im Unterverzeichnis <code>cross-check</code>.</p>
</div>
<div class="sect2">
<h3 id="_regressionstest">5.1. Regressionstest</h3>
<div class="sect3">
<h4 id="_verzeichnisstruktur">5.1.1. Verzeichnisstruktur</h4>
<div class="literalblock">
<div class="content">
<pre>/data/tests                     - root directory for tests
/data/tests/&lt;platform&gt;/&lt;test&gt;   - base directory for a test suite</pre>
</div>
</div>
<div class="paragraph">
<p>Die <code>Plattform</code> ist (gegenwärtig) eine von: <code>linux64</code>, <code>win32</code>,<code>win64</code> und <code>darwin64</code></p>
</div>
<div class="paragraph">
<p>Jede <em>Testfolge</em> hat eine Reihe von Unterverzeichnissen:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>fmus                 - enthält für den Test benötigte FMU-Archive
description          - (mathematische) Beschreibung des Test-Problems</pre>
</div>
</div>
<div class="paragraph">
<p>Innerhalb der <em>Testfolge</em> können verschiedene ähnliche <em>Testfälle</em> mit modifizierten Parametern oder angepassten Problemlösungs-Szenarien gespeichert sein. <em>Testfälle</em> werden in der Regel als Testfolgen gruppiert, wenn sie die selben FMUs oder andere Eingangsdateien benutzen.</p>
</div>
<div class="paragraph">
<p>Für jeden <em>Testfall</em> existiert eine <em>MasterSim</em>-Projektdatei mit der Erweiterung <code>msim</code>. Das Skript, welches die Testfälle durchführt, verarbeitet alle <code>msim</code>-Dateien, die in der Unterverzeichnisstruktur unter der aktuellen Plattform gefunden werden.</p>
</div>
<div class="paragraph">
<p>Um die Überprüfung in einem Testfall zu bestehen, muss eine Reihe von Referenzergebnissen vohanden sein, die in einem Unterverzeichnis mit folgendem Namen gespeichert sind:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;project_file_without_extension&gt;.&lt;compiler&gt;_&lt;platform&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Zum Beispiel:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>FeedthroughTest.gcc_linux
FeedthroughTest.vc14_win64</pre>
</div>
</div>
<div class="paragraph">
<p>Diese Verzeichnisse sind grundsätzlich nach einer durchlaufenen Simulation umbenannte Arbeitsverzeichnisse, in denen alles außer <code>summary.txt</code> und <code>values.csv</code> beseitigt worden ist.</p>
</div>
</div>
<div class="sect3">
<h4 id="_durchlauf_der_tests">5.1.2. Durchlauf der Tests</h4>
<div class="paragraph">
<p>Die Tests laufen automatisch ab nach der Errichtung mit den Aufbauskripts. Ansonsten läuft ein geeignetes Skript:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>build/cmake/run_tests_win32.bat</code></p>
</li>
<li>
<p><code>build/cmake/run_tests_win64.bat</code></p>
</li>
<li>
<p><code>build/cmake/run_tests.sh</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_aktualisierung_der_referenzergebnisse">5.1.3. Aktualisierung der Referenzergebnisse</h4>
<div class="paragraph">
<p>Aus dem Inneren ruft das Skript ein Testverzeichnis auf: <code>update_reference_results.py</code> mit der Verzeichnisendung als Argument.</p>
</div>
<div class="paragraph">
<p>Zum Beispiel von innen:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>data/tests/linux64/Math_003_control_loop</pre>
</div>
</div>
<div class="paragraph">
<p>ruft auf:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="o">&gt;</span> ../../../../scripts/TestSuite/update_reference_results.py gcc_linux</code></pre>
</div>
</div>
<div class="paragraph">
<p>welches alle Referenzergebnisse in diesem Verzeichnis aktualisieren wird. Falls Sie die Referenzergebnisse einiger Testfolgen bearbeiten/aktualisieren wollen, führen Sie das folgende Skript aus einem der oberen Verzeichnisse durch, zum Beispiel von: <code>data/tests/linux64</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="o">&gt;</span> ../../../scripts/TestSuite/update_reference_results_in_subdirs.py gcc_linux</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_regeln_für_gegenproben_und_die_liste_der_fmi_standard_org">5.2. Regeln für Gegenproben und die Liste der FMI Standard.org</h3>
<div class="paragraph">
<p>Siehe Dokumentation im Unterverzeichnis <code>cross-check</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_der_weg_um_test_fmus_zu_generieren">5.3. Der Weg um Test-FMUs zu generieren</h3>
<div class="sect3">
<h4 id="_der_gebrauch_von_c_fmus">5.3.1. Der Gebrauch von C++ - FMUs</h4>
<div class="paragraph">
<p>Ein geeigneter Weg, um ein einfaches, sehr spezielles Test-FMU zu erhalten, ist der Gebrauch des <a href="https://github.com/ghorwin/FMICodeGenerator">FMI Code Generator</a>-Werkzeugs. Es ist ein Python-Werkzeug, mit einer grafischen Benutzeroberfläche, auf der FMU-Variablen und -Eigenschaften festgelegt werden können. Mit dieser Information erstellt der Code-Generator ein Quellcodeverzeichnis mit einem Vorlagen-Code und verbundenen Aufbauskripts - sodass es sehr einfach ist, eigene FMUs herzustellen. Siehe Dokumentation /Tutorial auf der Github-Seite.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fmus_die_von_der_simulationsx_exportiert_werden">5.3.2. FMUs, die von der SimulationsX exportiert werden.</h4>
<div class="paragraph">
<p>Benötigt eine passende Lizenz. Das Exportieren von FMUs aus SimX ist sehr einfach, aber für die Windows-Plattform beschränkt.</p>
</div>
</div>
<div class="sect3">
<h4 id="_von_openmodelica_exportierte_fmus">5.3.3. Von OpenModelica exportierte FMUs</h4>
<div class="paragraph">
<p>OpenModelica kann ebenso FMUs exportieren. Hier folgen die Schritte, um so ein FMU herzustellen.</p>
</div>
<div class="sect4">
<h5 id="_erstellen_eines_modelica_modells">Erstellen eines Modelica Modells</h5>
<div class="paragraph">
<p>Erstellen eines Modelica Modells.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Annotieren Sie Variablen, die als Ausgangsgröße genutzt werden mit dem Stichwort <code>output</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Zum Beispiel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">model</span> <span class="n">BouncingBall</span> <span class="s">"The 'classic' bouncing ball model"</span>
  <span class="n">type</span> <span class="n">Height</span><span class="o">=</span><span class="n">Real</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s">"m"</span><span class="p">);</span>
  <span class="n">type</span> <span class="n">Velocity</span><span class="o">=</span><span class="n">Real</span><span class="p">(</span><span class="n">unit</span><span class="o">=</span><span class="s">"m/s"</span><span class="p">);</span>
  <span class="n">parameter</span> <span class="n">Real</span> <span class="n">e</span><span class="o">=</span><span class="mf">0.8</span> <span class="s">"Coefficient of restitution"</span><span class="p">;</span>
  <span class="n">parameter</span> <span class="n">Height</span> <span class="n">h0</span><span class="o">=</span><span class="mf">1.0</span> <span class="s">"Initial height"</span><span class="p">;</span>
  <span class="n">output</span> <span class="n">Height</span> <span class="n">h</span> <span class="s">"Height"</span><span class="p">;</span>
  <span class="n">output</span> <span class="n">Velocity</span> <span class="n">v</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">fixed</span><span class="o">=</span><span class="nb">true</span><span class="p">)</span> <span class="s">"Velocity"</span><span class="p">;</span>
  <span class="n">output</span> <span class="n">Integer</span> <span class="nf">bounceCounter</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">output</span> <span class="n">Boolean</span> <span class="n">falling</span><span class="p">;</span>
<span class="n">initial</span> <span class="n">equation</span>
  <span class="n">h</span> <span class="o">=</span> <span class="n">h0</span><span class="p">;</span>
<span class="n">equation</span>
  <span class="n">v</span> <span class="o">=</span> <span class="n">der</span><span class="p">(</span><span class="n">h</span><span class="p">);</span>
  <span class="n">der</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">=</span> <span class="o">-</span><span class="mf">9.81</span><span class="p">;</span>
  <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="n">then</span>
    <span class="n">falling</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="k">else</span>
    <span class="n">falling</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
  <span class="n">end</span> <span class="k">if</span><span class="p">;</span>
  <span class="n">when</span> <span class="n">h</span><span class="o">&lt;</span><span class="mi">0</span> <span class="n">then</span>
    <span class="nf">reinit</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="o">-</span><span class="n">e</span><span class="o">*</span><span class="n">pre</span><span class="p">(</span><span class="n">v</span><span class="p">));</span>
    <span class="n">bounceCounter</span> <span class="o">=</span> <span class="n">pre</span><span class="p">(</span><span class="n">bounceCounter</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">end</span> <span class="n">when</span><span class="p">;</span>
<span class="n">annotation</span><span class="p">(</span>
    <span class="n">experiment</span><span class="p">(</span><span class="n">StartTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">StopTime</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">Tolerance</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">,</span> <span class="n">Interval</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">));</span>
<span class="n">end</span> <span class="n">BouncingBall</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_variante_1_das_fmu_manuell_erstellen">Variante 1: Das FMU manuell erstellen</h5>
<div class="paragraph">
<p>Öffnen Sie zunächst OMShell, tippen Sie dann die folgenden Befehle, um das Modell zu laden und erzeugen Sie ein Co-Simulations-FMU:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="o">&gt;&gt;</span> loadFile<span class="o">(</span><span class="s2">"/path/to/modelica/models/BouncingBall/BouncingBall.mo"</span><span class="o">)</span>
<span class="o">&gt;&gt;</span> translateModelFMU<span class="o">(</span>BouncingBall, <span class="nv">fmuType</span><span class="o">=</span><span class="s2">"cs"</span><span class="o">)</span>
<span class="s2">"/tmp/OpenModelica/BouncingBall.fmu"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Der Output lässt vermuten, dass die FMU-Datei <code>/tmp/OpenModelica/BouncingBall.fmu</code> erfolgreich erstellt wurde.</p>
</div>
<div class="paragraph">
<p>Für Version 2.0 des FMI-Standard-Gebrauchs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="o">&gt;&gt;</span> translateModelFMU<span class="o">(</span>BouncingBall, <span class="nv">fmuType</span><span class="o">=</span><span class="s2">"cs"</span>, <span class="nv">version</span><span class="o">=</span><span class="s2">"2.0"</span><span class="o">)</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_variante_2_skript_basierte_automatische_fmu_erzeugung">Variante 2: Skript-basierte automatische FMU-Erzeugung</h5>
<div class="paragraph">
<p>Erstellen Sie eine Skript-Datei (<code>createFMU.mos</code>) mit dem folgenden Inhalt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">loadModel</span><span class="p">(</span><span class="n">Modelica</span><span class="p">,</span> <span class="p">{</span><span class="s">"3.2.1"</span><span class="p">});</span> <span class="n">getErrorString</span><span class="p">();</span>
<span class="n">loadModel</span><span class="p">(</span><span class="n">Modelica_DeviceDrivers</span><span class="p">);</span> <span class="n">getErrorString</span><span class="p">();</span>

<span class="n">setLanguageStandard</span><span class="p">(</span><span class="s">"3.3"</span><span class="p">);</span> <span class="n">getErrorString</span><span class="p">();</span>

<span class="n">cd</span><span class="p">(</span><span class="s">"./fmus"</span><span class="p">);</span>
<span class="n">loadFile</span><span class="p">(</span><span class="s">"../reference_Modelica/BouncingBall.mo"</span><span class="p">);</span> <span class="n">getErrorString</span><span class="p">();</span>

<span class="n">setDebugFlags</span><span class="p">(</span><span class="s">"backenddaeinfo"</span><span class="p">);</span><span class="n">getErrorString</span><span class="p">();</span>
<span class="n">translateModelFMU</span><span class="p">(</span><span class="n">BouncingBall</span><span class="p">,</span> <span class="n">fmuType</span><span class="o">=</span><span class="s">"cs"</span><span class="p">);</span> <span class="n">getErrorString</span><span class="p">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Lassen Sie das Skript laufen, mittels:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="o">&gt;</span> omc createFMU.mos</code></pre>
</div>
</div>
<hr>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_assistenzfunktionen_für_fmu_entwicklung_und_fehlerbeseitigung">6. Assistenzfunktionen für FMU-Entwicklung und Fehlerbeseitigung</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dieser Abschnitt beschreibt einige Funktionen von <em>MasterSim</em>, die teilweise nützlich für Entwickler eigener FMUs oder zum Identifizieren von Rechenproblemen eines dritten FMUs sind.</p>
</div>
<div class="sect2">
<h3 id="_modifikationfixierung_des_fmu_inhalts">6.1. Modifikation/Fixierung des FMU-Inhalts</h3>
<div class="paragraph">
<p>Wenn ein FMU eine ungültige <code>modelDescription.xml</code>-Datei besitzt, kann der Prozess zum Entpacken der FMU, Fixieren der Datei, erneutes Packen der FMU und das erneute Versuchen der Simulation mit einem Co-Simulations-Master zu viel Zeit kosten. Mit <em>MasterSim</em> läuft die Simulation nur einmal und extrahiert das FMU in das jeweilige <code>fmus</code>-Unterverzeichnis subdir. Dort kann man alle Dateien untersuchen und Fehler festmachen, oder fehlende Dateien zufügen.</p>
</div>
<div class="paragraph">
<p>Das nächste mal, wenn Sie den <em>MasterSimulator</em> durchlaufen lassen, führen Sie die Befehlszeilen-Option <code>--skip-unzip</code> aus und <em>MasterSim</em> wird den Schritt des Entpackens überspringen und direkt auf die Dateien im extrahierten Verzeichnis zugreifen.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_informationen_für_entwickler">7. Informationen für Entwickler</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Die in diesem Kapitel zur Verfügung gestellten Informationen werden eventuell in den <em>MasterSim Developers Guide</em> verschoben.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_erstellen_von_bibliotheken_und_ausführbaren_programmen">7.1. Erstellen von Bibliotheken und ausführbaren Programmen</h3>
<div class="sect3">
<h4 id="_erstellen_durch_die_befehlszeile">7.1.1. Erstellen durch die Befehlszeile</h4>
<div class="sect4">
<h5 id="_linuxmacos">Linux/MacOS</h5>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nb">cd </span>build/cmake
./build.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Im Falle fehlender Abhängigkeiten (verlangt zlib) wollen Sie vielleicht die zugehörigen Entwicklungspakete installieren.</p>
</div>
</div>
<div class="sect4">
<h5 id="_windows">Windows</h5>
<div class="paragraph">
<p>Es sind komfortable Skripte für die Errichtung mit Visual Studio 2015 und Qt5 (für die Benutzeroberfläche von <em>MasterSim</em>) enthalten. Andere Kompilierer, wie MinGw, arbeiten genauso gut, die Dateienpfade müssen allerdings manuell konfiguriert werden.</p>
</div>
<div class="paragraph">
<p>Die Dateien sind im <code>build/cmake</code>-Verzeichnis verortet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>build\cmake\build_VC.bat <i class="conum" data-value="1"></i><b>(1)</b>
build\cmake\build_VC_x64.bat <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>for x86 builds</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>for x64 builds</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Damit die Skripte funktionieren, muss Qt am folgenden Ort installiert sein:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>c:\Qt\5.11.3\msvc2015 <i class="conum" data-value="1"></i><b>(1)</b>
c:\Qt\5.11.3\msvc2015_64 <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>für Aufbauten x86</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>für Aufbauten x64</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>und <strong>jom.exe</strong> findet man unter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>c:\Qt\Tools\QtCreator\bin\jom.exe</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>`cmake` muss ebenso im Pfad vorhanden sein. Wenn es irgendwo anders installiert ist, können alternativ die Umgebungsvariablen `JOM_PATH` und `CMAKE_PREFIX_PATH` gesetzt werden (siehe Aufbau-Batch-Dateien).</pre>
</div>
</div>
<div class="paragraph">
<p>Mit dieser Konfiguration können Sie nun entweder im 32-bit- oder 64-bit-Modus weiter bauen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="batch"><span class="nb">cd</span> <span class="kd">build</span>\cmake
<span class="kd">build_VC14</span>.bat</code></pre>
</div>
</div>
<div class="paragraph">
<p>oder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="batch"><span class="nb">cd</span> <span class="kd">build</span>\cmake
<span class="kd">build_VC14_x64</span>.bat</code></pre>
</div>
</div>
<div class="paragraph">
<p>Für unterschiedliche Visual-Studio-Versionen oder MinGW kopieren Sie die Batch-Datei und bearbeiten die Pfadgrößen. Eventuell wollen Sie auch diese Batch-Dateien überarbeiten, wenn sie verschiedene Installationspfade haben.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_externe_bibliotheken">7.1.2. Externe Bibliotheken</h4>
<div class="paragraph">
<p>Die <em>MasterSim</em>-Bibliothek und die Simulationsprojekte unterscheiden sich durch die folgenden externen/dritten Bibliotheken (außer für Qt sind alle im Quell-Code-Speicher enthalten, somit ist es nicht notwendig, diese Bibliotheken separat zu installieren):</p>
</div>
<div class="paragraph">
<p><strong>MasterSimulator</strong> und <strong>MasterSimulatorUI</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>IBK-Bibliothek (von IBK, TU Dresden, Germany)</p>
</li>
<li>
<p>IBKMK-Bibliothek (von IBK, TU Dresden, Germany), Untergruppe der Mathe-Kernel-Bibliothek der IBK</p>
</li>
<li>
<p>TiCPP-Bibliothek (eine angepasste Version, angeboten von IBK, TU Dresden, Germany)</p>
</li>
<li>
<p>Minizip and zlib zum Entpacken von FMUs</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>nur <strong>MasterSimulatorUI</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.qt.io/developers">Qt 5 Library</a></p>
</li>
<li>
<p><a href="https://github.com/ghorwin/BlockMod">BlockMod library</a> (von IBK, TU Dresden, Germany, untergebracht in github)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Die frei verfügbare Version der Bibliotheken (mit Ausnahme von Qt) sind im Unterverzeichnis <code>third-party</code> verortet.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Die Bibliotheken in einem dritten Unterverzeichnis sind möglicherweise veraltet. Nutzen Sie bitte nur den Quell-Code im <code>externals</code>-Unterverzeichnis des Speicherortes.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_entwicklungsumgebungen_und_projekt_sitzungsdateien">7.2. Entwicklungsumgebungen und Projekt-/Sitzungsdateien</h3>
<div class="sect3">
<h4 id="_qt_creator">7.2.1. Qt Creator</h4>
<div class="paragraph">
<p>Die Entwicklung mit Qt Creator wird unterstützt und Projektdateien stehen zur Verfügung. Individuelle Projektdateien befinden sich in Unterverzeichnissen:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;library/app&gt;/projects/Qt/&lt;library/app&gt;.pro</pre>
</div>
</div>
<div class="paragraph">
<p>Ausführbare Programme sind verortet in:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>bin/debug        - Ausgabepfad für Entwicklungen mit dem Qt-Erschaffer
bin/release      - standardisierter Ausgabepfad für Cmake-Bildung</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_visuelles_studio">7.2.2. Visuelles Studio</h4>
<div class="sect4">
<h5 id="_cmake_erstellte_vc_projektdateien">CMake-erstellte VC-Projektdateien</h5>
<div class="paragraph">
<p>Die einfachste Variante, die immer funktionieren sollte, ist die CMake-erzeugte VC-Projektdatei und Problemlösung zu verwenden.</p>
</div>
<div class="paragraph">
<p>Basisschritte: Öffnen Sie ein Konsolenfenster, die Installation des VC-Umgebungsaufbau und alle erforderlichen Pfade, nutzen Sie dann CMake mit dem Visual Studio Erstellungsdatei-Generator.</p>
</div>
<div class="paragraph">
<p>Sie können die <code>build.bat</code>- oder <code>built_x64.bat</code>-Dateien für diesen Zweck wiederverwenden. Öffnen Sie ein Befehlszeilenfenster und ändern dies in das Verzeichnis <code>build/cmake</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>starten Sie entweder <code>build.bat</code> oder <code>built_x64.bat</code> und drücken Sie Ctrl+C, wenn der Aufbau startet.</p>
</li>
<li>
<p>Verlassen Sie das Unterverzeichnis und erstellen Sie ein neues Unterverzeichnis vc:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="batch"><span class="o">&gt;</span> <span class="nb">mkdir</span> <span class="kd">vc</span>
<span class="o">&gt;</span> <span class="nb">cd</span> <span class="kd">vc</span></code></pre>
</div>
</div>
</li>
<li>
<p>Öffnen Sie cmake-gui, geben Sie das Elternverzeichnis als Quellverzeichnis an und wählen Sie einen Visual Studio Erstellungsgenerator.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="batch"><span class="o">&gt;</span> <span class="kd">cmake</span><span class="na">-gui </span>..</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_vorbereitete_vc_projektdateien">Vorbereitete VC-Projektdateien</h5>
<div class="paragraph">
<p>Sie können ebenso die VC-Problemlösungsdatei in <code>build\VC14\MasterSim.sln</code> öffnen.
<strong>Note</strong>: Sie müssen zunächst die CMake erstellen, um die Zlib <code>zconf.h</code>-Datei zu konfigurieren!</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hilfreiches_material_bezogen_auf_die_entwicklung_auf_linux">7.3. Hilfreiches Material bezogen auf die Entwicklung auf Linux</h3>
<div class="paragraph">
<p>Hier folgen ein paar Anmerkungen, die ich gesammelt habe, als ich auf einige unerwartete Schwierigkeiten beim Erstellen dieses Master-Simulators gestoßen bin:</p>
</div>
<div class="sect3">
<h4 id="_überprüfen_von_symbolen_in_gemeinsamen_bibliotheken">7.3.1. Überprüfen von Symbolen in gemeinsamen Bibliotheken</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">objdump <span class="nt">-t</span> &lt;shared_library&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Um alle fmi2-Funktionen zu erhalten</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">objdump <span class="nt">-t</span> &lt;shared_library&gt; | <span class="nb">grep </span>fmi2</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_verknüpfung_gemeinsamer_bibliotheken_mit_statischen_teilen_die_in_ausführenden_programmen_ebenso_auftauchen">7.3.2. Verknüpfung gemeinsamer Bibliotheken mit statischen Teilen (die in ausführenden Programmen ebenso auftauchen)</h4>
<div class="paragraph">
<p><strong>Problem:</strong> Ursache des Problems: Sowohl FMU als auch Master nutzen die IBK-Bibliothek, welche wiederum statistische Teile/Singletons (z. B. Message-Handler) haben. Wenn FMU mit Exe während der Reinigung am Ende der Leitung verbunden wird, wird der Destructor des Singleton-Objekts zweimal aufgerufen, was einen Teilfehler verursacht.</p>
</div>
<div class="paragraph">
<p><strong>Lösung:</strong>
Dennoch keine, es scheint zu funktionieren, nachdem die "Verdopplung der So-Import-Prüfung" hinzugefügt wurde.</p>
</div>
<div class="paragraph">
<p>TODO: Hervorheben Eigennamen? z. B. cmake, Qt creator</p>
</div>
</div>
<div class="sect3">
<h4 id="_fmu_von_fehlern_befreien">7.3.3. FMU von Fehlern befreien</h4>
<div class="paragraph">
<p>Vorausgesetzt Sie entwickeln die gemeinsame FMU-Bibliothek mit dem Qt Creator, können sie diesem Ablauf folgen:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Erstellen Sie ihr FMU entweder mit erhöhter Fehlerreinigung oder geben Sie Fehlerreinigungssymbole frei. Sie können auch eine externe Aufbauwerkzeug-Verkettung nutzen, z. B. Cmake.</p>
</li>
<li>
<p>Stellen Sie ihr FMU zusammen und entpacken Sie es im FMU-Archiv (Sie müssen dies nur einmal tun); Bedenken Sie: die gemeinsame Bibliothek innerhalb des FMU muss diejenige sein, die mit einem Qt Creator erstellt wurde</p>
</li>
<li>
<p>Erstellen Sie ihr MSIM-Test-Projekt.</p>
</li>
<li>
<p>Im Qt Creator öffnen und aktivieren Sie das MaterSimulator-Projekt, wählen Sie das MSIM-Projekt als Befehlszeilenargument aus und starten Sie die Fehlerbereinigung. Es wird die FMUs extrahieren und zu den Funktionen der gemeinsamen Bibliothek zufügen.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Sie können jetzt entweder Fehler entfernen und zu den Funktionen von FMU fmi2xxx übergehen oder die Quelldateien öffnen, die Sie für das Erstellen des FMU genutzt haben und Programmstopps setzten. Der Qt Creator wird diese automatisch aufnehmen und Sie können Fehler bereinigen/zum Master übergehen und ebenso zu den FMUs.</p>
</div>
<div class="sect4">
<h5 id="_beipiel_während_der_fehlerbereinigung_eines_gesonderten_fmu_projekts_welches_statisch_im_freigabemodus_erstellt_ist_aber_während_der_entwicklung_dynamisch_mit_anderen_bibliotheken_verbunden_ist">Beipiel: Während der Fehlerbereinigung eines gesonderten FMU-Projekts, welches statisch im Freigabemodus erstellt ist, aber während der Entwicklung dynamisch mit anderen Bibliotheken verbunden ist.</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Das FMU ist erstellt (zunächst mit  einer statisch verbundenen FMU <code>Test.so</code>) und das MasterSim-Projekt ist eingerichtet.</p>
</li>
<li>
<p><em>MasterSim</em> läuft einmal und die Verzeichnisstruktur ist erstellt, das FMU ist extrahiert und wurde ohne angehängte Fehlerbeseitigung gestartet.</p>
</li>
<li>
<p>Nun erstellt das FMU-Entwicklungsprojekt im Qt Creator <code>libTest.so.2.0.1</code>, welches eine Verbindung zu anderen dynamischen Bibliotheken im Entwicklungsverzeichnis schafft.</p>
</li>
<li>
<p>Die FMU-Datei wird in <code>Test.so</code> umbenannt und in das extrahierte FMU-Verzeichnis kopiert, wodurch es das statisch verknüpfte FMU überschreibt.</p>
</li>
<li>
<p>Der Suchpfad der Bibliothek zu der anderen dynamischen Bibliothek, zu welcher <code>libTest.so.2.0.1</code> führt, ist variabel zur Umgebung von MasterSim-Projekt <code>LD_LIBRARY_PATH</code> zugefügt.</p>
</li>
<li>
<p><code>MasterSimulator</code> startet im Feherbereinigungs-Modus unter Nutzung der <code>--skip-unzip</code>-Befehlszeilen-Option.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_innerhalb_von_mastersim">7.4. Innerhalb von MasterSim</h3>
<div class="sect3">
<h4 id="_datentypen">7.4.1. Datentypen</h4>
<div class="paragraph">
<p>Die Simulation mit unterschiedlichen FMU-Datentypen (v1 and v2) sollte übereinstimmen. Ebenso sind die voreingestellten Typenüberschriften die selben für beide Versionen.</p>
</div>
<div class="paragraph">
<p>Die vorgesehene Plattform für diesen Master ist das Desktop-System (32bit/64bit), deshalb werden alle vom Master-Algorithmus erkannten Datentypen folgendermaßen zugeordnet:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fmi2Boolean</code> (<code>bool</code> in skalierten Schnittstellenfunktionen)</p>
</li>
<li>
<p><code>int</code></p>
</li>
<li>
<p><code>double</code></p>
</li>
<li>
<p><code>std::string</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_verbindungsgraf_und_variable_zuordnung">7.4.2. Verbindungsgraf und variable Zuordnung</h4>
<div class="paragraph">
<p>Variablen können einzig identifiziert werden von</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;slave-name&gt;.&lt;variable-name&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>und ein Graf kann definiert werden von:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>A.x1         B.u1
A.d1         C.du1
B.x1         C.u1
B.x2         A.u2
C.x1         A.u1</pre>
</div>
</div>
<div class="paragraph">
<p>Die erste Spalte sind Ausgabevariablen, die zweite Spalte verbundene Eingangsvariablen. x sind wahre Typen, d vom Typ <em>ganze Zahl</em>.</p>
</div>
<div class="paragraph">
<p>Jeder Slave besitzt für jeden Datentypen einen Vektor an Ausgabewerten (bool, int, real/double, string).
Der Master besitzt außerdem für jeden Datentypen einen Vektor für Verbindungsvariablen.</p>
</div>
<div class="paragraph">
<p>Eine Abbildung der Variablen des lokalen Slave-Speichers zum globalen Vektor und vom globalen Vektor zu den Eingängen wird durch eine Abbildungstabelle individuell für jeden Datentypen realisiert:</p>
</div>
<div class="paragraph">
<p><strong>Abbildung Ausgänge - wahre Typen</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Slave</th>
<th class="tableblock halign-left valign-top">VariableName</th>
<th class="tableblock halign-left valign-top">global index</th>
<th class="tableblock halign-left valign-top">local index</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Der Transfer von lokaler zu globaler Datenspeicherung ist dann ein simpler Algorithmus:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>loop connectedVariableIndexes:
    copy(localArray[localIndex], globalArray[globalIndex])</pre>
</div>
</div>
<div class="paragraph">
<p>Im Fall von Slave B wird das Feld connectedVariableIndexes [0, 1] sein.</p>
</div>
<div class="paragraph">
<p><strong>Abbildung Eingänge - wahre Typen</strong></p>
</div>
<div class="paragraph">
<p>Für Eingangsvariablen existiert eine gleichartige Abbildung. Kein Slave hat einen Eingangsvariablen-Zwischenspeicher, statt dessen sind die Variablen individuell gesetzt (siehe auch Newton-Algorithmus und die Jacobian-Generatio via DQ-Algorithmus).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Slave</th>
<th class="tableblock halign-left valign-top">VariableName</th>
<th class="tableblock halign-left valign-top">global index</th>
<th class="tableblock halign-left valign-top">local value reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">u1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">55</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">u1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">348432</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">u2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">122</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">u1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">321</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Abbildungen von Eingang und Ausgang sind in der einzelnen Tabelle RealVariableMappings kombiniert.</p>
</div>
<div class="paragraph">
<p><strong>Notiz</strong>: Der Ausgang eines Slaves ist eventuell direkt mit jeder eigenen Eingangsvariable verbunden, zum Beispiel:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>fmu1.var2   fmu1.var15</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.8.2<br>
Last updated 2020-04-23 12:17:12 +0200
</div>
</div>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</body>
</html>